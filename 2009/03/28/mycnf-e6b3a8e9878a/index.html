<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>my.cnf 注释 | 白天’s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="从 hi!admin 抄来的一份配置.注释得非常好.精
#BEGIN CONFIG INFO #DESCR: 4GB RAM, 只使用InnoDB, ACID, 少量的连接, 队列负载大 #TYPE: SYSTEM #END CONFIG INFO
此mysql配置文件例子针对4G内存 主要使用INNODB #处理复杂队列并且连接数量较少的mysql服务器
将此文件复制到/etc/my.cnf 作为全局设置, mysql-data-dir/my.cnf 作为服务器指定设置 (@localstatedir@ for this installation) 或者放入 ~/.my.cnf 作为用户设置. 在此配置文件中, 你可以使用所有程序支持的长选项. 如果想获悉程序支持的所有选项 请在程序后加上&quot;&ndash;help&quot;参数运行程序. 关于独立选项更多的细节信息可以在手册内找到 以下选项会被MySQL客户端应用读取. 注意只有MySQL附带的客户端应用程序保证可以读取这段内容. 如果你想你自己的MySQL应用程序获取这些值 需要在MySQL客户端库初始化的时候指定这些选项 [client] #password = [your_password] port = @MYSQL_TCP_PORT@ socket = @MYSQL_UNIX_ADDR@
*** 应用定制选项 *** MySQL 服务端 [mysqld]
一般配置选项 port = @MYSQL_TCP_PORT@ socket = @MYSQL_UNIX_ADDR@
back_log 是操作系统在监听队列中所能保持的连接数, 队列保存了在MySQL连接管理器线程处理之前的连接. 如果你有非常高的连接率并且出现&quot;connection refused&quot; 报错, 你就应该增加此处的值.">
<meta name="author" content="admin">
<link rel="canonical" href="http://example.org/2009/03/28/mycnf-e6b3a8e9878a/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bccfefac377bc340f06c260aed1bddf49a4354816d7c570d6aac75a997986c95.css" integrity="sha256-vM/vrDd7w0DwbCYK7Rvd9JpDVIFtfFcNaqx1qZeYbJU=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://example.org/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://example.org/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://example.org/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://example.org/apple-touch-icon.png">
<link rel="mask-icon" href="http://example.org/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="my.cnf 注释" />
<meta property="og:description" content="从 hi!admin 抄来的一份配置.注释得非常好.精
#BEGIN CONFIG INFO #DESCR: 4GB RAM, 只使用InnoDB, ACID, 少量的连接, 队列负载大 #TYPE: SYSTEM #END CONFIG INFO
此mysql配置文件例子针对4G内存 主要使用INNODB #处理复杂队列并且连接数量较少的mysql服务器
将此文件复制到/etc/my.cnf 作为全局设置, mysql-data-dir/my.cnf 作为服务器指定设置 (@localstatedir@ for this installation) 或者放入 ~/.my.cnf 作为用户设置. 在此配置文件中, 你可以使用所有程序支持的长选项. 如果想获悉程序支持的所有选项 请在程序后加上&quot;&ndash;help&quot;参数运行程序. 关于独立选项更多的细节信息可以在手册内找到 以下选项会被MySQL客户端应用读取. 注意只有MySQL附带的客户端应用程序保证可以读取这段内容. 如果你想你自己的MySQL应用程序获取这些值 需要在MySQL客户端库初始化的时候指定这些选项 [client] #password = [your_password] port = @MYSQL_TCP_PORT@ socket = @MYSQL_UNIX_ADDR@
*** 应用定制选项 *** MySQL 服务端 [mysqld]
一般配置选项 port = @MYSQL_TCP_PORT@ socket = @MYSQL_UNIX_ADDR@
back_log 是操作系统在监听队列中所能保持的连接数, 队列保存了在MySQL连接管理器线程处理之前的连接. 如果你有非常高的连接率并且出现&quot;connection refused&quot; 报错, 你就应该增加此处的值." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/2009/03/28/mycnf-e6b3a8e9878a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2009-03-28T16:38:29+00:00" />
<meta property="article:modified_time" content="2009-03-28T16:38:29+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="my.cnf 注释"/>
<meta name="twitter:description" content="从 hi!admin 抄来的一份配置.注释得非常好.精
#BEGIN CONFIG INFO #DESCR: 4GB RAM, 只使用InnoDB, ACID, 少量的连接, 队列负载大 #TYPE: SYSTEM #END CONFIG INFO
此mysql配置文件例子针对4G内存 主要使用INNODB #处理复杂队列并且连接数量较少的mysql服务器
将此文件复制到/etc/my.cnf 作为全局设置, mysql-data-dir/my.cnf 作为服务器指定设置 (@localstatedir@ for this installation) 或者放入 ~/.my.cnf 作为用户设置. 在此配置文件中, 你可以使用所有程序支持的长选项. 如果想获悉程序支持的所有选项 请在程序后加上&quot;&ndash;help&quot;参数运行程序. 关于独立选项更多的细节信息可以在手册内找到 以下选项会被MySQL客户端应用读取. 注意只有MySQL附带的客户端应用程序保证可以读取这段内容. 如果你想你自己的MySQL应用程序获取这些值 需要在MySQL客户端库初始化的时候指定这些选项 [client] #password = [your_password] port = @MYSQL_TCP_PORT@ socket = @MYSQL_UNIX_ADDR@
*** 应用定制选项 *** MySQL 服务端 [mysqld]
一般配置选项 port = @MYSQL_TCP_PORT@ socket = @MYSQL_UNIX_ADDR@
back_log 是操作系统在监听队列中所能保持的连接数, 队列保存了在MySQL连接管理器线程处理之前的连接. 如果你有非常高的连接率并且出现&quot;connection refused&quot; 报错, 你就应该增加此处的值."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://example.org/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "my.cnf 注释",
      "item": "http://example.org/2009/03/28/mycnf-e6b3a8e9878a/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "my.cnf 注释",
  "name": "my.cnf 注释",
  "description": "从 hi!admin 抄来的一份配置.注释得非常好.精\n#BEGIN CONFIG INFO #DESCR: 4GB RAM, 只使用InnoDB, ACID, 少量的连接, 队列负载大 #TYPE: SYSTEM #END CONFIG INFO\n此mysql配置文件例子针对4G内存 主要使用INNODB #处理复杂队列并且连接数量较少的mysql服务器\n将此文件复制到/etc/my.cnf 作为全局设置, mysql-data-dir/my.cnf 作为服务器指定设置 (@localstatedir@ for this installation) 或者放入 ~/.my.cnf 作为用户设置. 在此配置文件中, 你可以使用所有程序支持的长选项. 如果想获悉程序支持的所有选项 请在程序后加上\u0026quot;\u0026ndash;help\u0026quot;参数运行程序. 关于独立选项更多的细节信息可以在手册内找到 以下选项会被MySQL客户端应用读取. 注意只有MySQL附带的客户端应用程序保证可以读取这段内容. 如果你想你自己的MySQL应用程序获取这些值 需要在MySQL客户端库初始化的时候指定这些选项 [client] #password = [your_password] port = @MYSQL_TCP_PORT@ socket = @MYSQL_UNIX_ADDR@\n*** 应用定制选项 *** MySQL 服务端 [mysqld]\n一般配置选项 port = @MYSQL_TCP_PORT@ socket = @MYSQL_UNIX_ADDR@\nback_log 是操作系统在监听队列中所能保持的连接数, 队列保存了在MySQL连接管理器线程处理之前的连接. 如果你有非常高的连接率并且出现\u0026quot;connection refused\u0026quot; 报错, 你就应该增加此处的值.",
  "keywords": [
    
  ],
  "articleBody": "从 hi!admin 抄来的一份配置.注释得非常好.精\n#BEGIN CONFIG INFO #DESCR: 4GB RAM, 只使用InnoDB, ACID, 少量的连接, 队列负载大 #TYPE: SYSTEM #END CONFIG INFO\n此mysql配置文件例子针对4G内存 主要使用INNODB #处理复杂队列并且连接数量较少的mysql服务器\n将此文件复制到/etc/my.cnf 作为全局设置, mysql-data-dir/my.cnf 作为服务器指定设置 (@localstatedir@ for this installation) 或者放入 ~/.my.cnf 作为用户设置. 在此配置文件中, 你可以使用所有程序支持的长选项. 如果想获悉程序支持的所有选项 请在程序后加上\"–help\"参数运行程序. 关于独立选项更多的细节信息可以在手册内找到 以下选项会被MySQL客户端应用读取. 注意只有MySQL附带的客户端应用程序保证可以读取这段内容. 如果你想你自己的MySQL应用程序获取这些值 需要在MySQL客户端库初始化的时候指定这些选项 [client] #password = [your_password] port = @MYSQL_TCP_PORT@ socket = @MYSQL_UNIX_ADDR@\n*** 应用定制选项 *** MySQL 服务端 [mysqld]\n一般配置选项 port = @MYSQL_TCP_PORT@ socket = @MYSQL_UNIX_ADDR@\nback_log 是操作系统在监听队列中所能保持的连接数, 队列保存了在MySQL连接管理器线程处理之前的连接. 如果你有非常高的连接率并且出现\"connection refused\" 报错, 你就应该增加此处的值. 检查你的操作系统文档来获取这个变量的最大值. 如果将back_log设定到比你操作系统限制更高的值,将会没有效果 back_log = 50\n不在TCP/IP端口上进行监听. 如果所有的进程都是在同一台服务器连接到本地的mysqld, 这样设置将是增强安全的方法 所有mysqld的连接都是通过Unix sockets 或者命名管道进行的. 注意在windows下如果没有打开命名管道选项而只是用此项 (通过 “enable-named-pipe” 选项) 将会导致mysql服务没有任何作用! #skip-networking\nMySQL 服务所允许的同时会话数的上限 其中一个连接将被SUPER权限保留作为管理员登录. 即便已经达到了连接数的上限. max_connections = 100\n每个客户端连接最大的错误允许数量,如果达到了此限制. 这个客户端将会被MySQL服务阻止直到执行了\"FLUSH HOSTS\" 或者服务重启 非法的密码以及其他在链接时的错误会增加此值. 查看 “Aborted_connects” 状态来获取全局计数器. max_connect_errors = 10\n所有线程所打开表的数量. 增加此值就增加了mysqld所需要的文件描述符的数量 这样你需要确认在[mysqld_safe]中 “open-files-limit” 变量设置打开文件数量允许至少4096 table_cache = 2048\n允许外部文件级别的锁. 打开文件锁会对性能造成负面影响 所以只有在你在同样的文件上运行多个数据库实例时才使用此选项(注意仍会有其他约束!) 或者你在文件层面上使用了其他一些软件依赖来锁定MyISAM表 #external-locking\n服务所能处理的请求包的最大大小以及服务所能处理的最大的请求大小(当与大的BLOB字段一起工作时相当必要) 每个连接独立的大小.大小动态增加 max_allowed_packet = 16M\n在一个事务中binlog为了记录SQL状态所持有的cache大小 如果你经常使用大的,多声明的事务,你可以增加此值来获取更大的性能. 所有从事务来的状态都将被缓冲在binlog缓冲中然后在提交后一次性写入到binlog中 如果事务比此值大, 会使用磁盘上的临时文件来替代. 此缓冲在每个连接的事务第一次更新状态时被创建 binlog_cache_size = 1M\n独立的内存表所允许的最大容量. 此选项为了防止意外创建一个超大的内存表导致永尽所有的内存资源. max_heap_table_size = 64M\n排序缓冲被用来处理类似ORDER BY以及GROUP BY队列所引起的排序 如果排序后的数据无法放入排序缓冲, 一个用来替代的基于磁盘的合并分类会被使用 查看 “Sort_merge_passes” 状态变量. 在排序发生时由每个线程分配 sort_buffer_size = 8M\n此缓冲被使用来优化全联合(full JOINs 不带索引的联合). 类似的联合在极大多数情况下有非常糟糕的性能表现, 但是将此值设大能够减轻性能影响. 通过 “Select_full_join” 状态变量查看全联合的数量 当全联合发生时,在每个线程中分配 join_buffer_size = 8M\n我们在cache中保留多少线程用于重用 当一个客户端断开连接后,如果cache中的线程还少于thread_cache_size, 则客户端线程被放入cache中. 这可以在你需要大量新连接的时候极大的减少线程创建的开销 (一般来说如果你有好的线程模型的话,这不会有明显的性能提升.) thread_cache_size = 8\n此允许应用程序给予线程系统一个提示在同一时间给予渴望被运行的线程的数量. 此值只对于支持 thread_concurrency() 函数的系统有意义( 例如Sun Solaris). 你可可以尝试使用 [CPU数量]*(2..4) 来作为thread_concurrency的值 thread_concurrency = 8\n查询缓冲常被用来缓冲 SELECT 的结果并且在下一次同样查询的时候不再执行直接返回结果. 打开查询缓冲可以极大的提高服务器速度, 如果你有大量的相同的查询并且很少修改表. 查看 “Qcache_lowmem_prunes” 状态变量来检查是否当前值对于你的负载来说是否足够高. 注意: 在你表经常变化的情况下或者如果你的查询原文每次都不同, 查询缓冲也许引起性能下降而不是性能提升. query_cache_size = 64M\n只有小于此设定值的结果才会被缓冲 此设置用来保护查询缓冲,防止一个极大的结果集将其他所有的查询结果都覆盖. query_cache_limit = 2M\n被全文检索索引的最小的字长. 你也许希望减少它,如果你需要搜索更短字的时候. 注意在你修改此值之后, 你需要重建你的 FULLTEXT 索引 ft_min_word_len = 4\n如果你的系统支持 memlock() 函数,你也许希望打开此选项用以让运行中的mysql在在内存高度紧张的时候,数据在内存中保持锁定并且防止可能被swapping out 此选项对于性能有益 #memlock\n当创建新表时作为默认使用的表类型, 如果在创建表示没有特别执行表类型,将会使用此值 default_table_type = MYISAM\n线程使用的堆大小. 此容量的内存在每次连接时被预留. MySQL 本身常不会需要超过64K的内存 如果你使用你自己的需要大量堆的UDF函数 或者你的操作系统对于某些操作需要更多的堆, 你也许需要将其设置的更高一点. thread_stack = 192K\n设定默认的事务隔离级别.可用的级别如下: READ-UNCOMMITTED, READ-COMMITTED, REPEATABLE-READ, SERIALIZABLE transaction_isolation = REPEATABLE-READ\n内部(内存中)临时表的最大大小 如果一个表增长到比此值更大,将会自动转换为基于磁盘的表. 此限制是针对单个表的,而不是总和. tmp_table_size = 64M\n打开二进制日志功能. 在复制(replication)配置中,作为MASTER主服务器必须打开此项 如果你需要从你最后的备份中做基于时间点的恢复,你也同样需要二进制日志. log-bin=mysql-bin\n如果你在使用链式从服务器结构的复制模式 (A-\u003eB-\u003eC), 你需要在服务器B上打开此项. 此选项打开在从线程上重做过的更新的日志, 并将其写入从服务器的二进制日志. #log_slave_updates\n打开全查询日志. 所有的由服务器接收到的查询 (甚至对于一个错误语法的查询) 都会被记录下来. 这对于调试非常有用, 在生产环境中常常关闭此项. #log\n将警告打印输出到错误log文件. 如果你对于MySQL有任何问题 你应该打开警告log并且仔细审查错误日志,查出可能的原因. #log_warnings\n记录慢速查询. 慢速查询是指消耗了比 “long_query_time” 定义的更多时间的查询. 如果 log_long_format 被打开,那些没有使用索引的查询也会被记录. 如果你经常增加新查询到已有的系统内的话. 一般来说这是一个好主意, log_slow_queries\n所有的使用了比这个时间(以秒为单位)更多的查询会被认为是慢速查询. 不要在这里使用\"1\", 否则会导致所有的查询,甚至非常快的查询页被记录下来(由于MySQL 目前时间的精确度只能达到秒的级别). long_query_time = 2\n在慢速日志中记录更多的信息. 一般此项最好打开. 打开此项会记录使得那些没有使用索引的查询也被作为到慢速查询附加到慢速日志里 log_long_format\n此目录被MySQL用来保存临时文件.例如, 它被用来处理基于磁盘的大型排序,和内部排序一样. 以及简单的临时表. 如果你不创建非常大的临时文件,将其放置到 swapfs/tmpfs 文件系统上也许比较好 另一种选择是你也可以将其放置在独立的磁盘上. 你可以使用\";“来放置多个路径 他们会按照roud-robin方法被轮询使用. #tmpdir = /tmp\n*** 复制有关的设置 唯一的服务辨识号,数值位于 1 到 2^32-1之间. 此值在master和slave上都需要设置. 如果 “master-host” 没有被设置,则默认为1, 但是如果忽略此选项,MySQL不会作为master生效. server-id = 1\n复制的Slave (去掉master段的注释来使其生效) 为了配置此主机作为复制的slave服务器,你可以选择两种方法: 1) 使用 CHANGE MASTER TO 命令 (在我们的手册中有完整描述) - 语法如下: CHANGE MASTER TO MASTER_HOST=, MASTER_PORT=, MASTER_USER=, MASTER_PASSWORD= ; 你需要替换掉 , , 等被尖括号包围的字段以及使用master的端口号替换 (默认3306). 例子: CHANGE MASTER TO MASTER_HOST=‘125.564.12.1’, MASTER_PORT=3306, MASTER_USER=‘joe’, MASTER_PASSWORD=‘secret’; 或者 2) 设置以下的变量. 不论如何, 在你选择这种方法的情况下, 然后第一次启动复制(甚至不成功的情况下, 例如如果你输入错密码在master-password字段并且slave无法连接), slave会创建一个 master.info 文件,并且之后任何对于包含在此文件内的参数的变化都会被忽略 并且由 master.info 文件内的内容覆盖, 除非你关闭slave服务, 删除 master.info 并且重启slave 服务. 由于这个原因,你也许不想碰一下的配置(注释掉的) 并且使用 CHANGE MASTER TO (查看上面) 来代替 所需要的唯一id号位于 2 和 2^32 - 1之间 (并且和master不同) 如果master-host被设置了.则默认值是2 但是如果省略,则不会生效 #server-id = 2\n复制结构中的master - 必须 #master-host = 当连接到master上时slave所用来认证的用户名 - 必须 #master-user = 当连接到master上时slave所用来认证的密码 - 必须 #master-password = master监听的端口. 可选 - 默认是3306 #master-port = 使得slave只读.只有用户拥有SUPER权限和在上面的slave线程能够修改数据. 你可以使用此项去保证没有应用程序会意外的修改slave而不是master上的数据 #read_only\n#*** MyISAM 相关选项\n关键词缓冲的大小, 一般用来缓冲MyISAM表的索引块. 不要将其设置大于你可用内存的30%, 因为一部分内存同样被OS用来缓冲行数据 甚至在你并不使用MyISAM 表的情况下, 你也需要仍旧设置起 8-64M 内存由于它同样会被内部临时磁盘表使用. key_buffer_size = 32M\n用来做MyISAM表全表扫描的缓冲大小. 当全表扫描需要时,在对应线程中分配. read_buffer_size = 2M\n当在排序之后,从一个已经排序好的序列中读取行时,行数据将从这个缓冲中读取来防止磁盘寻道. 如果你增高此值,可以提高很多ORDER BY的性能. 当需要时由每个线程分配 read_rnd_buffer_size = 16M\nMyISAM 使用特殊的类似树的cache来使得突发插入 (这些插入是,INSERT … SELECT, INSERT … VALUES (…), (…), …, 以及 LOAD DATA INFILE) 更快. 此变量限制每个进程中缓冲树的字节数. 设置为 0 会关闭此优化. 为了最优化不要将此值设置大于 “key_buffer_size”. 当突发插入被检测到时此缓冲将被分配. bulk_insert_buffer_size = 64M\n此缓冲当MySQL需要在 REPAIR, OPTIMIZE, ALTER 以及 LOAD DATA INFILE 到一个空表中引起重建索引时被分配. 这在每个线程中被分配.所以在设置大值时需要小心. myisam_sort_buffer_size = 128M\nMySQL重建索引时所允许的最大临时文件的大小 (当 REPAIR, ALTER TABLE 或者 LOAD DATA INFILE). 如果文件大小比此值更大,索引会通过键值缓冲创建(更慢) myisam_max_sort_file_size = 10G\n如果被用来更快的索引创建索引所使用临时文件大于制定的值,那就使用键值缓冲方法. 这主要用来强制在大表中长字串键去使用慢速的键值缓冲方法来创建索引. myisam_max_extra_sort_file_size = 10G\n如果一个表拥有超过一个索引, MyISAM 可以通过并行排序使用超过一个线程去修复他们. 这对于拥有多个CPU以及大量内存情况的用户,是一个很好的选择. myisam_repair_threads = 1\n自动检查和修复没有适当关闭的 MyISAM 表. myisam_recover\n默认关闭 Federated skip-federated\n*** BDB 相关选项 *** 如果你运行的MySQL服务有BDB支持但是你不准备使用的时候使用此选项. 这会节省内存并且可能加速一些事. skip-bdb\n*** INNODB 相关选项 *** 如果你的MySQL服务包含InnoDB支持但是并不打算使用的话, 使用此选项会节省内存以及磁盘空间,并且加速某些部分 #skip-innodb\n附加的内存池被InnoDB用来保存 metadata 信息 如果InnoDB为此目的需要更多的内存,它会开始从OS这里申请内存. 由于这个操作在大多数现代操作系统上已经足够快, 你一般不需要修改此值. SHOW INNODB STATUS 命令会显示当先使用的数量. innodb_additional_mem_pool_size = 16M\nInnoDB使用一个缓冲池来保存索引和原始数据, 不像 MyISAM. 这里你设置越大,你在存取表里面数据时所需要的磁盘I/O越少. 在一个独立使用的数据库服务器上,你可以设置这个变量到服务器物理内存大小的80% 不要设置过大,否则,由于物理内存的竞争可能导致操作系统的换页颠簸. 注意在32位系统上你每个进程可能被限制在 2-3.5G 用户层面内存限制, 所以不要设置的太高. innodb_buffer_pool_size = 2G\nInnoDB 将数据保存在一个或者多个数据文件中成为表空间. 如果你只有单个逻辑驱动保存你的数据,一个单个的自增文件就足够好了. 其他情况下.每个设备一个文件一般都是个好的选择. 你也可以配置InnoDB来使用裸盘分区 - 请参考手册来获取更多相关内容 innodb_data_file_path = ibdata1:10M:autoextend\n设置此选项如果你希望InnoDB表空间文件被保存在其他分区. 默认保存在MySQL的datadir中. #innodb_data_home_dir = 用来同步IO操作的IO线程的数量. This value is 此值在Unix下被硬编码为4,但是在Windows磁盘I/O可能在一个大数值下表现的更好. innodb_file_io_threads = 4\n如果你发现InnoDB表空间损坏, 设置此值为一个非零值可能帮助你导出你的表. 从1开始并且增加此值知道你能够成功的导出表. #innodb_force_recovery=1\n在InnoDb核心内的允许线程数量. 最优值依赖于应用程序,硬件以及操作系统的调度方式. 过高的值可能导致线程的互斥颠簸. innodb_thread_concurrency = 16\n如果设置为1 ,InnoDB会在每次提交后刷新(fsync)事务日志到磁盘上, 这提供了完整的ACID行为. 如果你愿意对事务安全折衷, 并且你正在运行一个小的食物, 你可以设置此值到0或者2来减少由事务日志引起的磁盘I/O 0代表日志只大约每秒写入日志文件并且日志文件刷新到磁盘. 2代表日志写入日志文件在每次提交后,但是日志文件只有大约每秒才会刷新到磁盘上. innodb_flush_log_at_trx_commit = 1\n加速InnoDB的关闭. 这会阻止InnoDB在关闭时做全清除以及插入缓冲合并. 这可能极大增加关机时间, 但是取而代之的是InnoDB可能在下次启动时做这些操作. #innodb_fast_shutdown\n用来缓冲日志数据的缓冲区的大小. 当此值快满时, InnoDB将必须刷新数据到磁盘上. 由于基本上每秒都会刷新一次,所以没有必要将此值设置的太大(甚至对于长事务而言) innodb_log_buffer_size = 8M\n在日志组中每个日志文件的大小. 你应该设置日志文件总合大小到你缓冲池大小的25%~100% 来避免在日志文件覆写上不必要的缓冲池刷新行为. 不论如何, 请注意一个大的日志文件大小会增加恢复进程所需要的时间. innodb_log_file_size = 256M\n在日志组中的文件总数. 通常来说2~3是比较好的. innodb_log_files_in_group = 3\nInnoDB的日志文件所在位置. 默认是MySQL的datadir. 你可以将其指定到一个独立的硬盘上或者一个RAID1卷上来提高其性能 #innodb_log_group_home_dir\n在InnoDB缓冲池中最大允许的脏页面的比例. 如果达到限额, InnoDB会开始刷新他们防止他们妨碍到干净数据页面. 这是一个软限制,不被保证绝对执行. innodb_max_dirty_pages_pct = 90\nInnoDB用来刷新日志的方法. 表空间总是使用双重写入刷新方法 默认值是 “fdatasync”, 另一个是 “O_DSYNC”. #innodb_flush_method=O_DSYNC\n在被回滚前,一个InnoDB的事务应该等待一个锁被批准多久. InnoDB在其拥有的锁表中自动检测事务死锁并且回滚事务. 如果你使用 LOCK TABLES 指令, 或者在同样事务中使用除了InnoDB以外的其他事务安全的存储引擎 那么一个死锁可能发生而InnoDB无法注意到. 这种情况下这个timeout值对于解决这种问题就非常有帮助. innodb_lock_wait_timeout = 120\n[mysqldump]\n不要在将内存中的整个结果写入磁盘之前缓存. 在导出非常巨大的表时需要此项 quick\nmax_allowed_packet = 16M\n[mysql] no-auto-rehash\n仅仅允许使用键值的 UPDATEs 和 DELETEs . #safe-updates\n[isamchk] key_buffer = 512M sort_buffer_size = 512M read_buffer = 8M write_buffer = 8M\n[myisamchk] key_buffer = 512M sort_buffer_size = 512M read_buffer = 8M write_buffer = 8M\n[mysqlhotcopy] interactive-timeout\n[mysqld_safe]\n增加每个进程的可打开文件数量. 警告: 确认你已经将全系统限制设定的足够高! 打开大量表需要将此值设高 open-files-limit = 8192 http://hi.baidu.com/liangzhongbo/blog/item/627a5c2e22eeb0584ec226ee.html\n",
  "wordCount" : "695",
  "inLanguage": "en",
  "datePublished": "2009-03-28T16:38:29Z",
  "dateModified": "2009-03-28T16:38:29Z",
  "author":{
    "@type": "Person",
    "name": "admin"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://example.org/2009/03/28/mycnf-e6b3a8e9878a/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "白天’s Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "http://example.org/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://example.org/" accesskey="h" title="白天’s Blog (Alt + H)">白天’s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      my.cnf 注释
    </h1>
    <div class="post-meta"><span title='2009-03-28 16:38:29 +0000 UTC'>March 28, 2009</span>&nbsp;·&nbsp;admin

</div>
  </header> 
  <div class="post-content"><p>从 hi!admin 抄来的一份配置.注释得非常好.精</p>
<p>#BEGIN CONFIG INFO
#DESCR: 4GB RAM,  只使用InnoDB, ACID, 少量的连接, 队列负载大
#TYPE: SYSTEM
#END CONFIG INFO</p>
<h1 id="heading"><a hidden class="anchor" aria-hidden="true" href="#heading">#</a></h1>
<h1 id="此mysql配置文件例子针对4g内存">此mysql配置文件例子针对4G内存<a hidden class="anchor" aria-hidden="true" href="#此mysql配置文件例子针对4g内存">#</a></h1>
<h1 id="主要使用innodb">主要使用INNODB<a hidden class="anchor" aria-hidden="true" href="#主要使用innodb">#</a></h1>
<p>#处理复杂队列并且连接数量较少的mysql服务器</p>
<h1 id="heading-1"><a hidden class="anchor" aria-hidden="true" href="#heading-1">#</a></h1>
<h1 id="将此文件复制到etcmycnf-作为全局设置">将此文件复制到/etc/my.cnf 作为全局设置,<a hidden class="anchor" aria-hidden="true" href="#将此文件复制到etcmycnf-作为全局设置">#</a></h1>
<h1 id="mysql-data-dirmycnf-作为服务器指定设置">mysql-data-dir/my.cnf 作为服务器指定设置<a hidden class="anchor" aria-hidden="true" href="#mysql-data-dirmycnf-作为服务器指定设置">#</a></h1>
<h1 id="localstatedir-for-this-installation-或者放入">(@localstatedir@ for this installation) 或者放入<a hidden class="anchor" aria-hidden="true" href="#localstatedir-for-this-installation-或者放入">#</a></h1>
<h1 id="mycnf-作为用户设置">~/.my.cnf 作为用户设置.<a hidden class="anchor" aria-hidden="true" href="#mycnf-作为用户设置">#</a></h1>
<h1 id="heading-2"><a hidden class="anchor" aria-hidden="true" href="#heading-2">#</a></h1>
<h1 id="在此配置文件中-你可以使用所有程序支持的长选项">在此配置文件中, 你可以使用所有程序支持的长选项.<a hidden class="anchor" aria-hidden="true" href="#在此配置文件中-你可以使用所有程序支持的长选项">#</a></h1>
<h1 id="如果想获悉程序支持的所有选项">如果想获悉程序支持的所有选项<a hidden class="anchor" aria-hidden="true" href="#如果想获悉程序支持的所有选项">#</a></h1>
<h1 id="请在程序后加上--help参数运行程序">请在程序后加上&quot;&ndash;help&quot;参数运行程序.<a hidden class="anchor" aria-hidden="true" href="#请在程序后加上--help参数运行程序">#</a></h1>
<h1 id="heading-3"><a hidden class="anchor" aria-hidden="true" href="#heading-3">#</a></h1>
<h1 id="关于独立选项更多的细节信息可以在手册内找到">关于独立选项更多的细节信息可以在手册内找到<a hidden class="anchor" aria-hidden="true" href="#关于独立选项更多的细节信息可以在手册内找到">#</a></h1>
<h1 id="heading-4"><a hidden class="anchor" aria-hidden="true" href="#heading-4">#</a></h1>
<h1 id="heading-5"><a hidden class="anchor" aria-hidden="true" href="#heading-5">#</a></h1>
<h1 id="以下选项会被mysql客户端应用读取">以下选项会被MySQL客户端应用读取.<a hidden class="anchor" aria-hidden="true" href="#以下选项会被mysql客户端应用读取">#</a></h1>
<h1 id="注意只有mysql附带的客户端应用程序保证可以读取这段内容">注意只有MySQL附带的客户端应用程序保证可以读取这段内容.<a hidden class="anchor" aria-hidden="true" href="#注意只有mysql附带的客户端应用程序保证可以读取这段内容">#</a></h1>
<h1 id="如果你想你自己的mysql应用程序获取这些值">如果你想你自己的MySQL应用程序获取这些值<a hidden class="anchor" aria-hidden="true" href="#如果你想你自己的mysql应用程序获取这些值">#</a></h1>
<h1 id="需要在mysql客户端库初始化的时候指定这些选项">需要在MySQL客户端库初始化的时候指定这些选项<a hidden class="anchor" aria-hidden="true" href="#需要在mysql客户端库初始化的时候指定这些选项">#</a></h1>
<h1 id="heading-6"><a hidden class="anchor" aria-hidden="true" href="#heading-6">#</a></h1>
<p>[client]
#password =  [your_password]
port =  @MYSQL_TCP_PORT@
socket = @MYSQL_UNIX_ADDR@</p>
<h1 id="--应用定制选项-">***  应用定制选项 ***<a hidden class="anchor" aria-hidden="true" href="#--应用定制选项-">#</a></h1>
<h1 id="heading-7"><a hidden class="anchor" aria-hidden="true" href="#heading-7">#</a></h1>
<h1 id="mysql-服务端">MySQL 服务端<a hidden class="anchor" aria-hidden="true" href="#mysql-服务端">#</a></h1>
<h1 id="heading-8"><a hidden class="anchor" aria-hidden="true" href="#heading-8">#</a></h1>
<p>[mysqld]</p>
<h1 id="一般配置选项">一般配置选项<a hidden class="anchor" aria-hidden="true" href="#一般配置选项">#</a></h1>
<p>port = @MYSQL_TCP_PORT@
socket =  @MYSQL_UNIX_ADDR@</p>
<h1 id="back_log-是操作系统在监听队列中所能保持的连接数">back_log 是操作系统在监听队列中所能保持的连接数,<a hidden class="anchor" aria-hidden="true" href="#back_log-是操作系统在监听队列中所能保持的连接数">#</a></h1>
<h1 id="队列保存了在mysql连接管理器线程处理之前的连接">队列保存了在MySQL连接管理器线程处理之前的连接.<a hidden class="anchor" aria-hidden="true" href="#队列保存了在mysql连接管理器线程处理之前的连接">#</a></h1>
<h1 id="如果你有非常高的连接率并且出现connection-refused-报错">如果你有非常高的连接率并且出现&quot;connection refused&quot; 报错,<a hidden class="anchor" aria-hidden="true" href="#如果你有非常高的连接率并且出现connection-refused-报错">#</a></h1>
<h1 id="你就应该增加此处的值">你就应该增加此处的值.<a hidden class="anchor" aria-hidden="true" href="#你就应该增加此处的值">#</a></h1>
<h1 id="检查你的操作系统文档来获取这个变量的最大值">检查你的操作系统文档来获取这个变量的最大值.<a hidden class="anchor" aria-hidden="true" href="#检查你的操作系统文档来获取这个变量的最大值">#</a></h1>
<h1 id="如果将back_log设定到比你操作系统限制更高的值将会没有效果">如果将back_log设定到比你操作系统限制更高的值,将会没有效果<a hidden class="anchor" aria-hidden="true" href="#如果将back_log设定到比你操作系统限制更高的值将会没有效果">#</a></h1>
<p>back_log  = 50</p>
<h1 id="不在tcpip端口上进行监听">不在TCP/IP端口上进行监听.<a hidden class="anchor" aria-hidden="true" href="#不在tcpip端口上进行监听">#</a></h1>
<h1 id="如果所有的进程都是在同一台服务器连接到本地的mysqld">如果所有的进程都是在同一台服务器连接到本地的mysqld,<a hidden class="anchor" aria-hidden="true" href="#如果所有的进程都是在同一台服务器连接到本地的mysqld">#</a></h1>
<h1 id="这样设置将是增强安全的方法">这样设置将是增强安全的方法<a hidden class="anchor" aria-hidden="true" href="#这样设置将是增强安全的方法">#</a></h1>
<h1 id="所有mysqld的连接都是通过unix-sockets-或者命名管道进行的">所有mysqld的连接都是通过Unix sockets 或者命名管道进行的.<a hidden class="anchor" aria-hidden="true" href="#所有mysqld的连接都是通过unix-sockets-或者命名管道进行的">#</a></h1>
<h1 id="注意在windows下如果没有打开命名管道选项而只是用此项">注意在windows下如果没有打开命名管道选项而只是用此项<a hidden class="anchor" aria-hidden="true" href="#注意在windows下如果没有打开命名管道选项而只是用此项">#</a></h1>
<h1 id="通过-enable-named-pipe-选项--将会导致mysql服务没有任何作用">(通过 &ldquo;enable-named-pipe&rdquo; 选项)  将会导致mysql服务没有任何作用!<a hidden class="anchor" aria-hidden="true" href="#通过-enable-named-pipe-选项--将会导致mysql服务没有任何作用">#</a></h1>
<p>#skip-networking</p>
<h1 id="mysql-服务所允许的同时会话数的上限">MySQL 服务所允许的同时会话数的上限<a hidden class="anchor" aria-hidden="true" href="#mysql-服务所允许的同时会话数的上限">#</a></h1>
<h1 id="其中一个连接将被super权限保留作为管理员登录">其中一个连接将被SUPER权限保留作为管理员登录.<a hidden class="anchor" aria-hidden="true" href="#其中一个连接将被super权限保留作为管理员登录">#</a></h1>
<h1 id="即便已经达到了连接数的上限">即便已经达到了连接数的上限.<a hidden class="anchor" aria-hidden="true" href="#即便已经达到了连接数的上限">#</a></h1>
<p>max_connections = 100</p>
<h1 id="每个客户端连接最大的错误允许数量如果达到了此限制">每个客户端连接最大的错误允许数量,如果达到了此限制.<a hidden class="anchor" aria-hidden="true" href="#每个客户端连接最大的错误允许数量如果达到了此限制">#</a></h1>
<h1 id="这个客户端将会被mysql服务阻止直到执行了flush-hosts-或者服务重启">这个客户端将会被MySQL服务阻止直到执行了&quot;FLUSH HOSTS&quot; 或者服务重启<a hidden class="anchor" aria-hidden="true" href="#这个客户端将会被mysql服务阻止直到执行了flush-hosts-或者服务重启">#</a></h1>
<h1 id="非法的密码以及其他在链接时的错误会增加此值">非法的密码以及其他在链接时的错误会增加此值.<a hidden class="anchor" aria-hidden="true" href="#非法的密码以及其他在链接时的错误会增加此值">#</a></h1>
<h1 id="查看-aborted_connects-状态来获取全局计数器">查看 &ldquo;Aborted_connects&rdquo; 状态来获取全局计数器.<a hidden class="anchor" aria-hidden="true" href="#查看-aborted_connects-状态来获取全局计数器">#</a></h1>
<p>max_connect_errors = 10</p>
<h1 id="所有线程所打开表的数量">所有线程所打开表的数量.<a hidden class="anchor" aria-hidden="true" href="#所有线程所打开表的数量">#</a></h1>
<h1 id="增加此值就增加了mysqld所需要的文件描述符的数量">增加此值就增加了mysqld所需要的文件描述符的数量<a hidden class="anchor" aria-hidden="true" href="#增加此值就增加了mysqld所需要的文件描述符的数量">#</a></h1>
<h1 id="这样你需要确认在mysqld_safe中--open-files-limit-变量设置打开文件数量允许至少4096">这样你需要确认在[mysqld_safe]中  &ldquo;open-files-limit&rdquo; 变量设置打开文件数量允许至少4096<a hidden class="anchor" aria-hidden="true" href="#这样你需要确认在mysqld_safe中--open-files-limit-变量设置打开文件数量允许至少4096">#</a></h1>
<p>table_cache = 2048</p>
<h1 id="允许外部文件级别的锁--打开文件锁会对性能造成负面影响">允许外部文件级别的锁.  打开文件锁会对性能造成负面影响<a hidden class="anchor" aria-hidden="true" href="#允许外部文件级别的锁--打开文件锁会对性能造成负面影响">#</a></h1>
<h1 id="所以只有在你在同样的文件上运行多个数据库实例时才使用此选项注意仍会有其他约束">所以只有在你在同样的文件上运行多个数据库实例时才使用此选项(注意仍会有其他约束!)<a hidden class="anchor" aria-hidden="true" href="#所以只有在你在同样的文件上运行多个数据库实例时才使用此选项注意仍会有其他约束">#</a></h1>
<h1 id="或者你在文件层面上使用了其他一些软件依赖来锁定myisam表">或者你在文件层面上使用了其他一些软件依赖来锁定MyISAM表<a hidden class="anchor" aria-hidden="true" href="#或者你在文件层面上使用了其他一些软件依赖来锁定myisam表">#</a></h1>
<p>#external-locking</p>
<h1 id="服务所能处理的请求包的最大大小以及服务所能处理的最大的请求大小当与大的blob字段一起工作时相当必要">服务所能处理的请求包的最大大小以及服务所能处理的最大的请求大小(当与大的BLOB字段一起工作时相当必要)<a hidden class="anchor" aria-hidden="true" href="#服务所能处理的请求包的最大大小以及服务所能处理的最大的请求大小当与大的blob字段一起工作时相当必要">#</a></h1>
<h1 id="每个连接独立的大小大小动态增加">每个连接独立的大小.大小动态增加<a hidden class="anchor" aria-hidden="true" href="#每个连接独立的大小大小动态增加">#</a></h1>
<p>max_allowed_packet =  16M</p>
<h1 id="在一个事务中binlog为了记录sql状态所持有的cache大小">在一个事务中binlog为了记录SQL状态所持有的cache大小<a hidden class="anchor" aria-hidden="true" href="#在一个事务中binlog为了记录sql状态所持有的cache大小">#</a></h1>
<h1 id="如果你经常使用大的多声明的事务你可以增加此值来获取更大的性能">如果你经常使用大的,多声明的事务,你可以增加此值来获取更大的性能.<a hidden class="anchor" aria-hidden="true" href="#如果你经常使用大的多声明的事务你可以增加此值来获取更大的性能">#</a></h1>
<h1 id="所有从事务来的状态都将被缓冲在binlog缓冲中然后在提交后一次性写入到binlog中">所有从事务来的状态都将被缓冲在binlog缓冲中然后在提交后一次性写入到binlog中<a hidden class="anchor" aria-hidden="true" href="#所有从事务来的状态都将被缓冲在binlog缓冲中然后在提交后一次性写入到binlog中">#</a></h1>
<h1 id="如果事务比此值大-会使用磁盘上的临时文件来替代">如果事务比此值大, 会使用磁盘上的临时文件来替代.<a hidden class="anchor" aria-hidden="true" href="#如果事务比此值大-会使用磁盘上的临时文件来替代">#</a></h1>
<h1 id="此缓冲在每个连接的事务第一次更新状态时被创建">此缓冲在每个连接的事务第一次更新状态时被创建<a hidden class="anchor" aria-hidden="true" href="#此缓冲在每个连接的事务第一次更新状态时被创建">#</a></h1>
<p>binlog_cache_size =  1M</p>
<h1 id="独立的内存表所允许的最大容量">独立的内存表所允许的最大容量.<a hidden class="anchor" aria-hidden="true" href="#独立的内存表所允许的最大容量">#</a></h1>
<h1 id="此选项为了防止意外创建一个超大的内存表导致永尽所有的内存资源">此选项为了防止意外创建一个超大的内存表导致永尽所有的内存资源.<a hidden class="anchor" aria-hidden="true" href="#此选项为了防止意外创建一个超大的内存表导致永尽所有的内存资源">#</a></h1>
<p>max_heap_table_size = 64M</p>
<h1 id="排序缓冲被用来处理类似order-by以及group-by队列所引起的排序">排序缓冲被用来处理类似ORDER BY以及GROUP BY队列所引起的排序<a hidden class="anchor" aria-hidden="true" href="#排序缓冲被用来处理类似order-by以及group-by队列所引起的排序">#</a></h1>
<h1 id="如果排序后的数据无法放入排序缓冲">如果排序后的数据无法放入排序缓冲,<a hidden class="anchor" aria-hidden="true" href="#如果排序后的数据无法放入排序缓冲">#</a></h1>
<h1 id="一个用来替代的基于磁盘的合并分类会被使用">一个用来替代的基于磁盘的合并分类会被使用<a hidden class="anchor" aria-hidden="true" href="#一个用来替代的基于磁盘的合并分类会被使用">#</a></h1>
<h1 id="查看-sort_merge_passes-状态变量">查看 &ldquo;Sort_merge_passes&rdquo; 状态变量.<a hidden class="anchor" aria-hidden="true" href="#查看-sort_merge_passes-状态变量">#</a></h1>
<h1 id="在排序发生时由每个线程分配">在排序发生时由每个线程分配<a hidden class="anchor" aria-hidden="true" href="#在排序发生时由每个线程分配">#</a></h1>
<p>sort_buffer_size =  8M</p>
<h1 id="此缓冲被使用来优化全联合full-joins-不带索引的联合">此缓冲被使用来优化全联合(full JOINs 不带索引的联合).<a hidden class="anchor" aria-hidden="true" href="#此缓冲被使用来优化全联合full-joins-不带索引的联合">#</a></h1>
<h1 id="类似的联合在极大多数情况下有非常糟糕的性能表现">类似的联合在极大多数情况下有非常糟糕的性能表现,<a hidden class="anchor" aria-hidden="true" href="#类似的联合在极大多数情况下有非常糟糕的性能表现">#</a></h1>
<h1 id="但是将此值设大能够减轻性能影响">但是将此值设大能够减轻性能影响.<a hidden class="anchor" aria-hidden="true" href="#但是将此值设大能够减轻性能影响">#</a></h1>
<h1 id="通过-select_full_join--状态变量查看全联合的数量">通过 &ldquo;Select_full_join&rdquo;  状态变量查看全联合的数量<a hidden class="anchor" aria-hidden="true" href="#通过-select_full_join--状态变量查看全联合的数量">#</a></h1>
<h1 id="当全联合发生时在每个线程中分配">当全联合发生时,在每个线程中分配<a hidden class="anchor" aria-hidden="true" href="#当全联合发生时在每个线程中分配">#</a></h1>
<p>join_buffer_size = 8M</p>
<h1 id="我们在cache中保留多少线程用于重用">我们在cache中保留多少线程用于重用<a hidden class="anchor" aria-hidden="true" href="#我们在cache中保留多少线程用于重用">#</a></h1>
<h1 id="当一个客户端断开连接后如果cache中的线程还少于thread_cache_size">当一个客户端断开连接后,如果cache中的线程还少于thread_cache_size,<a hidden class="anchor" aria-hidden="true" href="#当一个客户端断开连接后如果cache中的线程还少于thread_cache_size">#</a></h1>
<h1 id="则客户端线程被放入cache中">则客户端线程被放入cache中.<a hidden class="anchor" aria-hidden="true" href="#则客户端线程被放入cache中">#</a></h1>
<h1 id="这可以在你需要大量新连接的时候极大的减少线程创建的开销">这可以在你需要大量新连接的时候极大的减少线程创建的开销<a hidden class="anchor" aria-hidden="true" href="#这可以在你需要大量新连接的时候极大的减少线程创建的开销">#</a></h1>
<h1 id="一般来说如果你有好的线程模型的话这不会有明显的性能提升">(一般来说如果你有好的线程模型的话,这不会有明显的性能提升.)<a hidden class="anchor" aria-hidden="true" href="#一般来说如果你有好的线程模型的话这不会有明显的性能提升">#</a></h1>
<p>thread_cache_size = 8</p>
<h1 id="此允许应用程序给予线程系统一个提示在同一时间给予渴望被运行的线程的数量">此允许应用程序给予线程系统一个提示在同一时间给予渴望被运行的线程的数量.<a hidden class="anchor" aria-hidden="true" href="#此允许应用程序给予线程系统一个提示在同一时间给予渴望被运行的线程的数量">#</a></h1>
<h1 id="此值只对于支持-thread_concurrency-函数的系统有意义--例如sun-solaris">此值只对于支持 thread_concurrency() 函数的系统有意义(  例如Sun Solaris).<a hidden class="anchor" aria-hidden="true" href="#此值只对于支持-thread_concurrency-函数的系统有意义--例如sun-solaris">#</a></h1>
<h1 id="你可可以尝试使用-cpu数量24-来作为thread_concurrency的值">你可可以尝试使用 [CPU数量]*(2..4) 来作为thread_concurrency的值<a hidden class="anchor" aria-hidden="true" href="#你可可以尝试使用-cpu数量24-来作为thread_concurrency的值">#</a></h1>
<p>thread_concurrency = 8</p>
<h1 id="查询缓冲常被用来缓冲--select-的结果并且在下一次同样查询的时候不再执行直接返回结果">查询缓冲常被用来缓冲  SELECT 的结果并且在下一次同样查询的时候不再执行直接返回结果.<a hidden class="anchor" aria-hidden="true" href="#查询缓冲常被用来缓冲--select-的结果并且在下一次同样查询的时候不再执行直接返回结果">#</a></h1>
<h1 id="打开查询缓冲可以极大的提高服务器速度--如果你有大量的相同的查询并且很少修改表">打开查询缓冲可以极大的提高服务器速度,  如果你有大量的相同的查询并且很少修改表.<a hidden class="anchor" aria-hidden="true" href="#打开查询缓冲可以极大的提高服务器速度--如果你有大量的相同的查询并且很少修改表">#</a></h1>
<h1 id="查看-qcache_lowmem_prunes--状态变量来检查是否当前值对于你的负载来说是否足够高">查看 &ldquo;Qcache_lowmem_prunes&rdquo;  状态变量来检查是否当前值对于你的负载来说是否足够高.<a hidden class="anchor" aria-hidden="true" href="#查看-qcache_lowmem_prunes--状态变量来检查是否当前值对于你的负载来说是否足够高">#</a></h1>
<h1 id="注意-在你表经常变化的情况下或者如果你的查询原文每次都不同">注意: 在你表经常变化的情况下或者如果你的查询原文每次都不同,<a hidden class="anchor" aria-hidden="true" href="#注意-在你表经常变化的情况下或者如果你的查询原文每次都不同">#</a></h1>
<h1 id="查询缓冲也许引起性能下降而不是性能提升">查询缓冲也许引起性能下降而不是性能提升.<a hidden class="anchor" aria-hidden="true" href="#查询缓冲也许引起性能下降而不是性能提升">#</a></h1>
<p>query_cache_size  = 64M</p>
<h1 id="只有小于此设定值的结果才会被缓冲">只有小于此设定值的结果才会被缓冲<a hidden class="anchor" aria-hidden="true" href="#只有小于此设定值的结果才会被缓冲">#</a></h1>
<h1 id="此设置用来保护查询缓冲防止一个极大的结果集将其他所有的查询结果都覆盖">此设置用来保护查询缓冲,防止一个极大的结果集将其他所有的查询结果都覆盖.<a hidden class="anchor" aria-hidden="true" href="#此设置用来保护查询缓冲防止一个极大的结果集将其他所有的查询结果都覆盖">#</a></h1>
<p>query_cache_limit = 2M</p>
<h1 id="被全文检索索引的最小的字长">被全文检索索引的最小的字长.<a hidden class="anchor" aria-hidden="true" href="#被全文检索索引的最小的字长">#</a></h1>
<h1 id="你也许希望减少它如果你需要搜索更短字的时候">你也许希望减少它,如果你需要搜索更短字的时候.<a hidden class="anchor" aria-hidden="true" href="#你也许希望减少它如果你需要搜索更短字的时候">#</a></h1>
<h1 id="注意在你修改此值之后">注意在你修改此值之后,<a hidden class="anchor" aria-hidden="true" href="#注意在你修改此值之后">#</a></h1>
<h1 id="你需要重建你的--fulltext-索引">你需要重建你的  FULLTEXT 索引<a hidden class="anchor" aria-hidden="true" href="#你需要重建你的--fulltext-索引">#</a></h1>
<p>ft_min_word_len =  4</p>
<h1 id="如果你的系统支持-memlock--函数你也许希望打开此选项用以让运行中的mysql在在内存高度紧张的时候数据在内存中保持锁定并且防止可能被swapping-out">如果你的系统支持 memlock()  函数,你也许希望打开此选项用以让运行中的mysql在在内存高度紧张的时候,数据在内存中保持锁定并且防止可能被swapping out<a hidden class="anchor" aria-hidden="true" href="#如果你的系统支持-memlock--函数你也许希望打开此选项用以让运行中的mysql在在内存高度紧张的时候数据在内存中保持锁定并且防止可能被swapping-out">#</a></h1>
<h1 id="此选项对于性能有益">此选项对于性能有益<a hidden class="anchor" aria-hidden="true" href="#此选项对于性能有益">#</a></h1>
<p>#memlock</p>
<h1 id="当创建新表时作为默认使用的表类型">当创建新表时作为默认使用的表类型,<a hidden class="anchor" aria-hidden="true" href="#当创建新表时作为默认使用的表类型">#</a></h1>
<h1 id="如果在创建表示没有特别执行表类型将会使用此值">如果在创建表示没有特别执行表类型,将会使用此值<a hidden class="anchor" aria-hidden="true" href="#如果在创建表示没有特别执行表类型将会使用此值">#</a></h1>
<p>default_table_type  = MYISAM</p>
<h1 id="线程使用的堆大小-此容量的内存在每次连接时被预留">线程使用的堆大小. 此容量的内存在每次连接时被预留.<a hidden class="anchor" aria-hidden="true" href="#线程使用的堆大小-此容量的内存在每次连接时被预留">#</a></h1>
<h1 id="mysql--本身常不会需要超过64k的内存">MySQL  本身常不会需要超过64K的内存<a hidden class="anchor" aria-hidden="true" href="#mysql--本身常不会需要超过64k的内存">#</a></h1>
<h1 id="如果你使用你自己的需要大量堆的udf函数">如果你使用你自己的需要大量堆的UDF函数<a hidden class="anchor" aria-hidden="true" href="#如果你使用你自己的需要大量堆的udf函数">#</a></h1>
<h1 id="或者你的操作系统对于某些操作需要更多的堆">或者你的操作系统对于某些操作需要更多的堆,<a hidden class="anchor" aria-hidden="true" href="#或者你的操作系统对于某些操作需要更多的堆">#</a></h1>
<h1 id="你也许需要将其设置的更高一点">你也许需要将其设置的更高一点.<a hidden class="anchor" aria-hidden="true" href="#你也许需要将其设置的更高一点">#</a></h1>
<p>thread_stack =  192K</p>
<h1 id="设定默认的事务隔离级别可用的级别如下">设定默认的事务隔离级别.可用的级别如下:<a hidden class="anchor" aria-hidden="true" href="#设定默认的事务隔离级别可用的级别如下">#</a></h1>
<h1 id="read-uncommitted-read-committed--repeatable-read-serializable">READ-UNCOMMITTED, READ-COMMITTED,  REPEATABLE-READ, SERIALIZABLE<a hidden class="anchor" aria-hidden="true" href="#read-uncommitted-read-committed--repeatable-read-serializable">#</a></h1>
<p>transaction_isolation =  REPEATABLE-READ</p>
<h1 id="内部内存中临时表的最大大小">内部(内存中)临时表的最大大小<a hidden class="anchor" aria-hidden="true" href="#内部内存中临时表的最大大小">#</a></h1>
<h1 id="如果一个表增长到比此值更大将会自动转换为基于磁盘的表">如果一个表增长到比此值更大,将会自动转换为基于磁盘的表.<a hidden class="anchor" aria-hidden="true" href="#如果一个表增长到比此值更大将会自动转换为基于磁盘的表">#</a></h1>
<h1 id="此限制是针对单个表的而不是总和">此限制是针对单个表的,而不是总和.<a hidden class="anchor" aria-hidden="true" href="#此限制是针对单个表的而不是总和">#</a></h1>
<p>tmp_table_size = 64M</p>
<h1 id="打开二进制日志功能">打开二进制日志功能.<a hidden class="anchor" aria-hidden="true" href="#打开二进制日志功能">#</a></h1>
<h1 id="在复制replication配置中作为master主服务器必须打开此项">在复制(replication)配置中,作为MASTER主服务器必须打开此项<a hidden class="anchor" aria-hidden="true" href="#在复制replication配置中作为master主服务器必须打开此项">#</a></h1>
<h1 id="如果你需要从你最后的备份中做基于时间点的恢复你也同样需要二进制日志">如果你需要从你最后的备份中做基于时间点的恢复,你也同样需要二进制日志.<a hidden class="anchor" aria-hidden="true" href="#如果你需要从你最后的备份中做基于时间点的恢复你也同样需要二进制日志">#</a></h1>
<p>log-bin=mysql-bin</p>
<h1 id="如果你在使用链式从服务器结构的复制模式-a-b-c">如果你在使用链式从服务器结构的复制模式 (A-&gt;B-&gt;C),<a hidden class="anchor" aria-hidden="true" href="#如果你在使用链式从服务器结构的复制模式-a-b-c">#</a></h1>
<h1 id="你需要在服务器b上打开此项">你需要在服务器B上打开此项.<a hidden class="anchor" aria-hidden="true" href="#你需要在服务器b上打开此项">#</a></h1>
<h1 id="此选项打开在从线程上重做过的更新的日志">此选项打开在从线程上重做过的更新的日志,<a hidden class="anchor" aria-hidden="true" href="#此选项打开在从线程上重做过的更新的日志">#</a></h1>
<h1 id="并将其写入从服务器的二进制日志">并将其写入从服务器的二进制日志.<a hidden class="anchor" aria-hidden="true" href="#并将其写入从服务器的二进制日志">#</a></h1>
<p>#log_slave_updates</p>
<h1 id="打开全查询日志-所有的由服务器接收到的查询-甚至对于一个错误语法的查询">打开全查询日志. 所有的由服务器接收到的查询 (甚至对于一个错误语法的查询)<a hidden class="anchor" aria-hidden="true" href="#打开全查询日志-所有的由服务器接收到的查询-甚至对于一个错误语法的查询">#</a></h1>
<h1 id="都会被记录下来-这对于调试非常有用--在生产环境中常常关闭此项">都会被记录下来. 这对于调试非常有用,  在生产环境中常常关闭此项.<a hidden class="anchor" aria-hidden="true" href="#都会被记录下来-这对于调试非常有用--在生产环境中常常关闭此项">#</a></h1>
<p>#log</p>
<h1 id="将警告打印输出到错误log文件-如果你对于mysql有任何问题">将警告打印输出到错误log文件. 如果你对于MySQL有任何问题<a hidden class="anchor" aria-hidden="true" href="#将警告打印输出到错误log文件-如果你对于mysql有任何问题">#</a></h1>
<h1 id="你应该打开警告log并且仔细审查错误日志查出可能的原因">你应该打开警告log并且仔细审查错误日志,查出可能的原因.<a hidden class="anchor" aria-hidden="true" href="#你应该打开警告log并且仔细审查错误日志查出可能的原因">#</a></h1>
<p>#log_warnings</p>
<h1 id="记录慢速查询-慢速查询是指消耗了比--long_query_time-定义的更多时间的查询">记录慢速查询. 慢速查询是指消耗了比  &ldquo;long_query_time&rdquo; 定义的更多时间的查询.<a hidden class="anchor" aria-hidden="true" href="#记录慢速查询-慢速查询是指消耗了比--long_query_time-定义的更多时间的查询">#</a></h1>
<h1 id="如果-log_long_format-被打开那些没有使用索引的查询也会被记录">如果 log_long_format 被打开,那些没有使用索引的查询也会被记录.<a hidden class="anchor" aria-hidden="true" href="#如果-log_long_format-被打开那些没有使用索引的查询也会被记录">#</a></h1>
<h1 id="如果你经常增加新查询到已有的系统内的话-一般来说这是一个好主意">如果你经常增加新查询到已有的系统内的话. 一般来说这是一个好主意,<a hidden class="anchor" aria-hidden="true" href="#如果你经常增加新查询到已有的系统内的话-一般来说这是一个好主意">#</a></h1>
<p>log_slow_queries</p>
<h1 id="所有的使用了比这个时间以秒为单位更多的查询会被认为是慢速查询">所有的使用了比这个时间(以秒为单位)更多的查询会被认为是慢速查询.<a hidden class="anchor" aria-hidden="true" href="#所有的使用了比这个时间以秒为单位更多的查询会被认为是慢速查询">#</a></h1>
<h1 id="不要在这里使用1--否则会导致所有的查询甚至非常快的查询页被记录下来由于mysql-目前时间的精确度只能达到秒的级别">不要在这里使用&quot;1&quot;,  否则会导致所有的查询,甚至非常快的查询页被记录下来(由于MySQL 目前时间的精确度只能达到秒的级别).<a hidden class="anchor" aria-hidden="true" href="#不要在这里使用1--否则会导致所有的查询甚至非常快的查询页被记录下来由于mysql-目前时间的精确度只能达到秒的级别">#</a></h1>
<p>long_query_time = 2</p>
<h1 id="在慢速日志中记录更多的信息">在慢速日志中记录更多的信息.<a hidden class="anchor" aria-hidden="true" href="#在慢速日志中记录更多的信息">#</a></h1>
<h1 id="一般此项最好打开">一般此项最好打开.<a hidden class="anchor" aria-hidden="true" href="#一般此项最好打开">#</a></h1>
<h1 id="打开此项会记录使得那些没有使用索引的查询也被作为到慢速查询附加到慢速日志里">打开此项会记录使得那些没有使用索引的查询也被作为到慢速查询附加到慢速日志里<a hidden class="anchor" aria-hidden="true" href="#打开此项会记录使得那些没有使用索引的查询也被作为到慢速查询附加到慢速日志里">#</a></h1>
<p>log_long_format</p>
<h1 id="此目录被mysql用来保存临时文件例如">此目录被MySQL用来保存临时文件.例如,<a hidden class="anchor" aria-hidden="true" href="#此目录被mysql用来保存临时文件例如">#</a></h1>
<h1 id="它被用来处理基于磁盘的大型排序和内部排序一样">它被用来处理基于磁盘的大型排序,和内部排序一样.<a hidden class="anchor" aria-hidden="true" href="#它被用来处理基于磁盘的大型排序和内部排序一样">#</a></h1>
<h1 id="以及简单的临时表">以及简单的临时表.<a hidden class="anchor" aria-hidden="true" href="#以及简单的临时表">#</a></h1>
<h1 id="如果你不创建非常大的临时文件将其放置到-swapfstmpfs-文件系统上也许比较好">如果你不创建非常大的临时文件,将其放置到 swapfs/tmpfs 文件系统上也许比较好<a hidden class="anchor" aria-hidden="true" href="#如果你不创建非常大的临时文件将其放置到-swapfstmpfs-文件系统上也许比较好">#</a></h1>
<h1 id="另一种选择是你也可以将其放置在独立的磁盘上">另一种选择是你也可以将其放置在独立的磁盘上.<a hidden class="anchor" aria-hidden="true" href="#另一种选择是你也可以将其放置在独立的磁盘上">#</a></h1>
<h1 id="你可以使用来放置多个路径">你可以使用&quot;;&ldquo;来放置多个路径<a hidden class="anchor" aria-hidden="true" href="#你可以使用来放置多个路径">#</a></h1>
<h1 id="他们会按照roud-robin方法被轮询使用">他们会按照roud-robin方法被轮询使用.<a hidden class="anchor" aria-hidden="true" href="#他们会按照roud-robin方法被轮询使用">#</a></h1>
<p>#tmpdir = /tmp</p>
<h1 id="--复制有关的设置">***  复制有关的设置<a hidden class="anchor" aria-hidden="true" href="#--复制有关的设置">#</a></h1>
<h1 id="唯一的服务辨识号数值位于-1-到-232-1之间">唯一的服务辨识号,数值位于 1 到 2^32-1之间.<a hidden class="anchor" aria-hidden="true" href="#唯一的服务辨识号数值位于-1-到-232-1之间">#</a></h1>
<h1 id="此值在master和slave上都需要设置">此值在master和slave上都需要设置.<a hidden class="anchor" aria-hidden="true" href="#此值在master和slave上都需要设置">#</a></h1>
<h1 id="如果-master-host-没有被设置则默认为1--但是如果忽略此选项mysql不会作为master生效">如果 &ldquo;master-host&rdquo; 没有被设置,则默认为1,  但是如果忽略此选项,MySQL不会作为master生效.<a hidden class="anchor" aria-hidden="true" href="#如果-master-host-没有被设置则默认为1--但是如果忽略此选项mysql不会作为master生效">#</a></h1>
<p>server-id =  1</p>
<h1 id="复制的slave-去掉master段的注释来使其生效">复制的Slave (去掉master段的注释来使其生效)<a hidden class="anchor" aria-hidden="true" href="#复制的slave-去掉master段的注释来使其生效">#</a></h1>
<h1 id="heading-9"><a hidden class="anchor" aria-hidden="true" href="#heading-9">#</a></h1>
<h1 id="为了配置此主机作为复制的slave服务器你可以选择两种方法">为了配置此主机作为复制的slave服务器,你可以选择两种方法:<a hidden class="anchor" aria-hidden="true" href="#为了配置此主机作为复制的slave服务器你可以选择两种方法">#</a></h1>
<h1 id="heading-10"><a hidden class="anchor" aria-hidden="true" href="#heading-10">#</a></h1>
<h1 id="1-使用-change-master-to-命令--在我们的手册中有完整描述--">1) 使用 CHANGE MASTER TO 命令  (在我们的手册中有完整描述) -<a hidden class="anchor" aria-hidden="true" href="#1-使用-change-master-to-命令--在我们的手册中有完整描述--">#</a></h1>
<h1 id="语法如下">语法如下:<a hidden class="anchor" aria-hidden="true" href="#语法如下">#</a></h1>
<h1 id="heading-11"><a hidden class="anchor" aria-hidden="true" href="#heading-11">#</a></h1>
<h1 id="change-master-to-master_hosthost--master_portport">CHANGE MASTER TO MASTER_HOST=<!-- raw HTML omitted -->,  MASTER_PORT=<!-- raw HTML omitted -->,<a hidden class="anchor" aria-hidden="true" href="#change-master-to-master_hosthost--master_portport">#</a></h1>
<h1 id="master_useruser--master_passwordpassword-">MASTER_USER=<!-- raw HTML omitted -->,  MASTER_PASSWORD=<!-- raw HTML omitted --> ;<a hidden class="anchor" aria-hidden="true" href="#master_useruser--master_passwordpassword-">#</a></h1>
<h1 id="heading-12"><a hidden class="anchor" aria-hidden="true" href="#heading-12">#</a></h1>
<h1 id="你需要替换掉-host-user--password-等被尖括号包围的字段以及使用master的端口号替换port-默认3306">你需要替换掉 <!-- raw HTML omitted -->, <!-- raw HTML omitted -->,  <!-- raw HTML omitted --> 等被尖括号包围的字段以及使用master的端口号替换<!-- raw HTML omitted --> (默认3306).<a hidden class="anchor" aria-hidden="true" href="#你需要替换掉-host-user--password-等被尖括号包围的字段以及使用master的端口号替换port-默认3306">#</a></h1>
<h1 id="heading-13"><a hidden class="anchor" aria-hidden="true" href="#heading-13">#</a></h1>
<h1 id="例子">例子:<a hidden class="anchor" aria-hidden="true" href="#例子">#</a></h1>
<h1 id="heading-14"><a hidden class="anchor" aria-hidden="true" href="#heading-14">#</a></h1>
<h1 id="change-master-to-master_host125564121--master_port3306">CHANGE MASTER TO MASTER_HOST=&lsquo;125.564.12.1&rsquo;,  MASTER_PORT=3306,<a hidden class="anchor" aria-hidden="true" href="#change-master-to-master_host125564121--master_port3306">#</a></h1>
<h1 id="master_userjoe-master_passwordsecret">MASTER_USER=&lsquo;joe&rsquo;, MASTER_PASSWORD=&lsquo;secret&rsquo;;<a hidden class="anchor" aria-hidden="true" href="#master_userjoe-master_passwordsecret">#</a></h1>
<h1 id="heading-15"><a hidden class="anchor" aria-hidden="true" href="#heading-15">#</a></h1>
<h1 id="或者">或者<a hidden class="anchor" aria-hidden="true" href="#或者">#</a></h1>
<h1 id="heading-16"><a hidden class="anchor" aria-hidden="true" href="#heading-16">#</a></h1>
<h1 id="2-设置以下的变量-不论如何-在你选择这种方法的情况下-然后第一次启动复制甚至不成功的情况下">2) 设置以下的变量. 不论如何, 在你选择这种方法的情况下, 然后第一次启动复制(甚至不成功的情况下,<a hidden class="anchor" aria-hidden="true" href="#2-设置以下的变量-不论如何-在你选择这种方法的情况下-然后第一次启动复制甚至不成功的情况下">#</a></h1>
<h1 id="例如如果你输入错密码在master-password字段并且slave无法连接">例如如果你输入错密码在master-password字段并且slave无法连接),<a hidden class="anchor" aria-hidden="true" href="#例如如果你输入错密码在master-password字段并且slave无法连接">#</a></h1>
<h1 id="slave会创建一个-masterinfo--文件并且之后任何对于包含在此文件内的参数的变化都会被忽略">slave会创建一个 master.info  文件,并且之后任何对于包含在此文件内的参数的变化都会被忽略<a hidden class="anchor" aria-hidden="true" href="#slave会创建一个-masterinfo--文件并且之后任何对于包含在此文件内的参数的变化都会被忽略">#</a></h1>
<h1 id="并且由-masterinfo-文件内的内容覆盖-除非你关闭slave服务-删除--masterinfo-并且重启slave-服务">并且由 master.info 文件内的内容覆盖, 除非你关闭slave服务, 删除  master.info 并且重启slave 服务.<a hidden class="anchor" aria-hidden="true" href="#并且由-masterinfo-文件内的内容覆盖-除非你关闭slave服务-删除--masterinfo-并且重启slave-服务">#</a></h1>
<h1 id="由于这个原因你也许不想碰一下的配置注释掉的-并且使用-change-master-to--查看上面-来代替">由于这个原因,你也许不想碰一下的配置(注释掉的) 并且使用 CHANGE MASTER TO  (查看上面) 来代替<a hidden class="anchor" aria-hidden="true" href="#由于这个原因你也许不想碰一下的配置注释掉的-并且使用-change-master-to--查看上面-来代替">#</a></h1>
<h1 id="heading-17"><a hidden class="anchor" aria-hidden="true" href="#heading-17">#</a></h1>
<h1 id="所需要的唯一id号位于-2-和-232---1之间">所需要的唯一id号位于 2 和 2^32 - 1之间<a hidden class="anchor" aria-hidden="true" href="#所需要的唯一id号位于-2-和-232---1之间">#</a></h1>
<h1 id="并且和master不同">(并且和master不同)<a hidden class="anchor" aria-hidden="true" href="#并且和master不同">#</a></h1>
<h1 id="如果master-host被设置了则默认值是2">如果master-host被设置了.则默认值是2<a hidden class="anchor" aria-hidden="true" href="#如果master-host被设置了则默认值是2">#</a></h1>
<h1 id="但是如果省略则不会生效">但是如果省略,则不会生效<a hidden class="anchor" aria-hidden="true" href="#但是如果省略则不会生效">#</a></h1>
<p>#server-id = 2</p>
<h1 id="heading-18"><a hidden class="anchor" aria-hidden="true" href="#heading-18">#</a></h1>
<h1 id="复制结构中的master---必须">复制结构中的master - 必须<a hidden class="anchor" aria-hidden="true" href="#复制结构中的master---必须">#</a></h1>
<p>#master-host = <!-- raw HTML omitted --></p>
<h1 id="heading-19"><a hidden class="anchor" aria-hidden="true" href="#heading-19">#</a></h1>
<h1 id="当连接到master上时slave所用来认证的用户名---必须">当连接到master上时slave所用来认证的用户名 - 必须<a hidden class="anchor" aria-hidden="true" href="#当连接到master上时slave所用来认证的用户名---必须">#</a></h1>
<p>#master-user = <!-- raw HTML omitted --></p>
<h1 id="heading-20"><a hidden class="anchor" aria-hidden="true" href="#heading-20">#</a></h1>
<h1 id="当连接到master上时slave所用来认证的密码---必须">当连接到master上时slave所用来认证的密码 - 必须<a hidden class="anchor" aria-hidden="true" href="#当连接到master上时slave所用来认证的密码---必须">#</a></h1>
<p>#master-password = <!-- raw HTML omitted --></p>
<h1 id="heading-21"><a hidden class="anchor" aria-hidden="true" href="#heading-21">#</a></h1>
<h1 id="master监听的端口">master监听的端口.<a hidden class="anchor" aria-hidden="true" href="#master监听的端口">#</a></h1>
<h1 id="可选---默认是3306">可选 - 默认是3306<a hidden class="anchor" aria-hidden="true" href="#可选---默认是3306">#</a></h1>
<p>#master-port = <!-- raw HTML omitted --></p>
<h1 id="使得slave只读只有用户拥有super权限和在上面的slave线程能够修改数据">使得slave只读.只有用户拥有SUPER权限和在上面的slave线程能够修改数据.<a hidden class="anchor" aria-hidden="true" href="#使得slave只读只有用户拥有super权限和在上面的slave线程能够修改数据">#</a></h1>
<h1 id="你可以使用此项去保证没有应用程序会意外的修改slave而不是master上的数据">你可以使用此项去保证没有应用程序会意外的修改slave而不是master上的数据<a hidden class="anchor" aria-hidden="true" href="#你可以使用此项去保证没有应用程序会意外的修改slave而不是master上的数据">#</a></h1>
<p>#read_only</p>
<p>#*** MyISAM  相关选项</p>
<h1 id="关键词缓冲的大小-一般用来缓冲myisam表的索引块">关键词缓冲的大小, 一般用来缓冲MyISAM表的索引块.<a hidden class="anchor" aria-hidden="true" href="#关键词缓冲的大小-一般用来缓冲myisam表的索引块">#</a></h1>
<h1 id="不要将其设置大于你可用内存的30">不要将其设置大于你可用内存的30%,<a hidden class="anchor" aria-hidden="true" href="#不要将其设置大于你可用内存的30">#</a></h1>
<h1 id="因为一部分内存同样被os用来缓冲行数据">因为一部分内存同样被OS用来缓冲行数据<a hidden class="anchor" aria-hidden="true" href="#因为一部分内存同样被os用来缓冲行数据">#</a></h1>
<h1 id="甚至在你并不使用myisam-表的情况下-你也需要仍旧设置起-8-64m--内存由于它同样会被内部临时磁盘表使用">甚至在你并不使用MyISAM 表的情况下, 你也需要仍旧设置起 8-64M  内存由于它同样会被内部临时磁盘表使用.<a hidden class="anchor" aria-hidden="true" href="#甚至在你并不使用myisam-表的情况下-你也需要仍旧设置起-8-64m--内存由于它同样会被内部临时磁盘表使用">#</a></h1>
<p>key_buffer_size =  32M</p>
<h1 id="用来做myisam表全表扫描的缓冲大小">用来做MyISAM表全表扫描的缓冲大小.<a hidden class="anchor" aria-hidden="true" href="#用来做myisam表全表扫描的缓冲大小">#</a></h1>
<h1 id="当全表扫描需要时在对应线程中分配">当全表扫描需要时,在对应线程中分配.<a hidden class="anchor" aria-hidden="true" href="#当全表扫描需要时在对应线程中分配">#</a></h1>
<p>read_buffer_size = 2M</p>
<h1 id="当在排序之后从一个已经排序好的序列中读取行时行数据将从这个缓冲中读取来防止磁盘寻道">当在排序之后,从一个已经排序好的序列中读取行时,行数据将从这个缓冲中读取来防止磁盘寻道.<a hidden class="anchor" aria-hidden="true" href="#当在排序之后从一个已经排序好的序列中读取行时行数据将从这个缓冲中读取来防止磁盘寻道">#</a></h1>
<h1 id="如果你增高此值可以提高很多order--by的性能">如果你增高此值,可以提高很多ORDER  BY的性能.<a hidden class="anchor" aria-hidden="true" href="#如果你增高此值可以提高很多order--by的性能">#</a></h1>
<h1 id="当需要时由每个线程分配">当需要时由每个线程分配<a hidden class="anchor" aria-hidden="true" href="#当需要时由每个线程分配">#</a></h1>
<p>read_rnd_buffer_size = 16M</p>
<h1 id="myisam--使用特殊的类似树的cache来使得突发插入">MyISAM  使用特殊的类似树的cache来使得突发插入<a hidden class="anchor" aria-hidden="true" href="#myisam--使用特殊的类似树的cache来使得突发插入">#</a></h1>
<h1 id="这些插入是insert--select-insert--values-----以及-load-data">(这些插入是,INSERT &hellip; SELECT, INSERT &hellip; VALUES (&hellip;),  (&hellip;), &hellip;, 以及 LOAD DATA<a hidden class="anchor" aria-hidden="true" href="#这些插入是insert--select-insert--values-----以及-load-data">#</a></h1>
<h1 id="infile-更快-此变量限制每个进程中缓冲树的字节数">INFILE) 更快. 此变量限制每个进程中缓冲树的字节数.<a hidden class="anchor" aria-hidden="true" href="#infile-更快-此变量限制每个进程中缓冲树的字节数">#</a></h1>
<h1 id="设置为-0--会关闭此优化">设置为 0  会关闭此优化.<a hidden class="anchor" aria-hidden="true" href="#设置为-0--会关闭此优化">#</a></h1>
<h1 id="为了最优化不要将此值设置大于-key_buffer_size">为了最优化不要将此值设置大于 &ldquo;key_buffer_size&rdquo;.<a hidden class="anchor" aria-hidden="true" href="#为了最优化不要将此值设置大于-key_buffer_size">#</a></h1>
<h1 id="当突发插入被检测到时此缓冲将被分配">当突发插入被检测到时此缓冲将被分配.<a hidden class="anchor" aria-hidden="true" href="#当突发插入被检测到时此缓冲将被分配">#</a></h1>
<p>bulk_insert_buffer_size = 64M</p>
<h1 id="此缓冲当mysql需要在-repair-optimize-alter-以及-load-data-infile-到一个空表中引起重建索引时被分配">此缓冲当MySQL需要在 REPAIR, OPTIMIZE, ALTER 以及 LOAD DATA INFILE 到一个空表中引起重建索引时被分配.<a hidden class="anchor" aria-hidden="true" href="#此缓冲当mysql需要在-repair-optimize-alter-以及-load-data-infile-到一个空表中引起重建索引时被分配">#</a></h1>
<h1 id="这在每个线程中被分配所以在设置大值时需要小心">这在每个线程中被分配.所以在设置大值时需要小心.<a hidden class="anchor" aria-hidden="true" href="#这在每个线程中被分配所以在设置大值时需要小心">#</a></h1>
<p>myisam_sort_buffer_size = 128M</p>
<h1 id="mysql重建索引时所允许的最大临时文件的大小-当-repair-alter-table-或者-load-data-infile">MySQL重建索引时所允许的最大临时文件的大小 (当 REPAIR, ALTER TABLE 或者 LOAD DATA INFILE).<a hidden class="anchor" aria-hidden="true" href="#mysql重建索引时所允许的最大临时文件的大小-当-repair-alter-table-或者-load-data-infile">#</a></h1>
<h1 id="如果文件大小比此值更大索引会通过键值缓冲创建更慢">如果文件大小比此值更大,索引会通过键值缓冲创建(更慢)<a hidden class="anchor" aria-hidden="true" href="#如果文件大小比此值更大索引会通过键值缓冲创建更慢">#</a></h1>
<p>myisam_max_sort_file_size = 10G</p>
<h1 id="如果被用来更快的索引创建索引所使用临时文件大于制定的值那就使用键值缓冲方法">如果被用来更快的索引创建索引所使用临时文件大于制定的值,那就使用键值缓冲方法.<a hidden class="anchor" aria-hidden="true" href="#如果被用来更快的索引创建索引所使用临时文件大于制定的值那就使用键值缓冲方法">#</a></h1>
<h1 id="这主要用来强制在大表中长字串键去使用慢速的键值缓冲方法来创建索引">这主要用来强制在大表中长字串键去使用慢速的键值缓冲方法来创建索引.<a hidden class="anchor" aria-hidden="true" href="#这主要用来强制在大表中长字串键去使用慢速的键值缓冲方法来创建索引">#</a></h1>
<p>myisam_max_extra_sort_file_size =  10G</p>
<h1 id="如果一个表拥有超过一个索引-myisam-可以通过并行排序使用超过一个线程去修复他们">如果一个表拥有超过一个索引, MyISAM 可以通过并行排序使用超过一个线程去修复他们.<a hidden class="anchor" aria-hidden="true" href="#如果一个表拥有超过一个索引-myisam-可以通过并行排序使用超过一个线程去修复他们">#</a></h1>
<h1 id="这对于拥有多个cpu以及大量内存情况的用户是一个很好的选择">这对于拥有多个CPU以及大量内存情况的用户,是一个很好的选择.<a hidden class="anchor" aria-hidden="true" href="#这对于拥有多个cpu以及大量内存情况的用户是一个很好的选择">#</a></h1>
<p>myisam_repair_threads = 1</p>
<h1 id="自动检查和修复没有适当关闭的-myisam-表">自动检查和修复没有适当关闭的 MyISAM 表.<a hidden class="anchor" aria-hidden="true" href="#自动检查和修复没有适当关闭的-myisam-表">#</a></h1>
<p>myisam_recover</p>
<h1 id="默认关闭-federated">默认关闭 Federated<a hidden class="anchor" aria-hidden="true" href="#默认关闭-federated">#</a></h1>
<p>skip-federated</p>
<h1 id="-bdb--相关选项-">*** BDB  相关选项 ***<a hidden class="anchor" aria-hidden="true" href="#-bdb--相关选项-">#</a></h1>
<h1 id="如果你运行的mysql服务有bdb支持但是你不准备使用的时候使用此选项-这会节省内存并且可能加速一些事">如果你运行的MySQL服务有BDB支持但是你不准备使用的时候使用此选项. 这会节省内存并且可能加速一些事.<a hidden class="anchor" aria-hidden="true" href="#如果你运行的mysql服务有bdb支持但是你不准备使用的时候使用此选项-这会节省内存并且可能加速一些事">#</a></h1>
<p>skip-bdb</p>
<h1 id="-innodb-相关选项--">*** INNODB 相关选项  ***<a hidden class="anchor" aria-hidden="true" href="#-innodb-相关选项--">#</a></h1>
<h1 id="如果你的mysql服务包含innodb支持但是并不打算使用的话">如果你的MySQL服务包含InnoDB支持但是并不打算使用的话,<a hidden class="anchor" aria-hidden="true" href="#如果你的mysql服务包含innodb支持但是并不打算使用的话">#</a></h1>
<h1 id="使用此选项会节省内存以及磁盘空间并且加速某些部分">使用此选项会节省内存以及磁盘空间,并且加速某些部分<a hidden class="anchor" aria-hidden="true" href="#使用此选项会节省内存以及磁盘空间并且加速某些部分">#</a></h1>
<p>#skip-innodb</p>
<h1 id="附加的内存池被innodb用来保存-metadata--信息">附加的内存池被InnoDB用来保存 metadata  信息<a hidden class="anchor" aria-hidden="true" href="#附加的内存池被innodb用来保存-metadata--信息">#</a></h1>
<h1 id="如果innodb为此目的需要更多的内存它会开始从os这里申请内存">如果InnoDB为此目的需要更多的内存,它会开始从OS这里申请内存.<a hidden class="anchor" aria-hidden="true" href="#如果innodb为此目的需要更多的内存它会开始从os这里申请内存">#</a></h1>
<h1 id="由于这个操作在大多数现代操作系统上已经足够快--你一般不需要修改此值">由于这个操作在大多数现代操作系统上已经足够快,  你一般不需要修改此值.<a hidden class="anchor" aria-hidden="true" href="#由于这个操作在大多数现代操作系统上已经足够快--你一般不需要修改此值">#</a></h1>
<h1 id="show-innodb-status-命令会显示当先使用的数量">SHOW INNODB STATUS 命令会显示当先使用的数量.<a hidden class="anchor" aria-hidden="true" href="#show-innodb-status-命令会显示当先使用的数量">#</a></h1>
<p>innodb_additional_mem_pool_size =  16M</p>
<h1 id="innodb使用一个缓冲池来保存索引和原始数据-不像-myisam">InnoDB使用一个缓冲池来保存索引和原始数据, 不像 MyISAM.<a hidden class="anchor" aria-hidden="true" href="#innodb使用一个缓冲池来保存索引和原始数据-不像-myisam">#</a></h1>
<h1 id="这里你设置越大你在存取表里面数据时所需要的磁盘io越少">这里你设置越大,你在存取表里面数据时所需要的磁盘I/O越少.<a hidden class="anchor" aria-hidden="true" href="#这里你设置越大你在存取表里面数据时所需要的磁盘io越少">#</a></h1>
<h1 id="在一个独立使用的数据库服务器上你可以设置这个变量到服务器物理内存大小的80">在一个独立使用的数据库服务器上,你可以设置这个变量到服务器物理内存大小的80%<a hidden class="anchor" aria-hidden="true" href="#在一个独立使用的数据库服务器上你可以设置这个变量到服务器物理内存大小的80">#</a></h1>
<h1 id="不要设置过大否则由于物理内存的竞争可能导致操作系统的换页颠簸">不要设置过大,否则,由于物理内存的竞争可能导致操作系统的换页颠簸.<a hidden class="anchor" aria-hidden="true" href="#不要设置过大否则由于物理内存的竞争可能导致操作系统的换页颠簸">#</a></h1>
<h1 id="注意在32位系统上你每个进程可能被限制在-2-35g--用户层面内存限制">注意在32位系统上你每个进程可能被限制在 2-3.5G  用户层面内存限制,<a hidden class="anchor" aria-hidden="true" href="#注意在32位系统上你每个进程可能被限制在-2-35g--用户层面内存限制">#</a></h1>
<h1 id="所以不要设置的太高">所以不要设置的太高.<a hidden class="anchor" aria-hidden="true" href="#所以不要设置的太高">#</a></h1>
<p>innodb_buffer_pool_size = 2G</p>
<h1 id="innodb--将数据保存在一个或者多个数据文件中成为表空间">InnoDB  将数据保存在一个或者多个数据文件中成为表空间.<a hidden class="anchor" aria-hidden="true" href="#innodb--将数据保存在一个或者多个数据文件中成为表空间">#</a></h1>
<h1 id="如果你只有单个逻辑驱动保存你的数据一个单个的自增文件就足够好了">如果你只有单个逻辑驱动保存你的数据,一个单个的自增文件就足够好了.<a hidden class="anchor" aria-hidden="true" href="#如果你只有单个逻辑驱动保存你的数据一个单个的自增文件就足够好了">#</a></h1>
<h1 id="其他情况下每个设备一个文件一般都是个好的选择">其他情况下.每个设备一个文件一般都是个好的选择.<a hidden class="anchor" aria-hidden="true" href="#其他情况下每个设备一个文件一般都是个好的选择">#</a></h1>
<h1 id="你也可以配置innodb来使用裸盘分区---请参考手册来获取更多相关内容">你也可以配置InnoDB来使用裸盘分区 - 请参考手册来获取更多相关内容<a hidden class="anchor" aria-hidden="true" href="#你也可以配置innodb来使用裸盘分区---请参考手册来获取更多相关内容">#</a></h1>
<p>innodb_data_file_path =  ibdata1:10M:autoextend</p>
<h1 id="设置此选项如果你希望innodb表空间文件被保存在其他分区">设置此选项如果你希望InnoDB表空间文件被保存在其他分区.<a hidden class="anchor" aria-hidden="true" href="#设置此选项如果你希望innodb表空间文件被保存在其他分区">#</a></h1>
<h1 id="默认保存在mysql的datadir中">默认保存在MySQL的datadir中.<a hidden class="anchor" aria-hidden="true" href="#默认保存在mysql的datadir中">#</a></h1>
<p>#innodb_data_home_dir = <!-- raw HTML omitted --></p>
<h1 id="用来同步io操作的io线程的数量-this-value-is">用来同步IO操作的IO线程的数量. This value is<a hidden class="anchor" aria-hidden="true" href="#用来同步io操作的io线程的数量-this-value-is">#</a></h1>
<h1 id="此值在unix下被硬编码为4但是在windows磁盘io可能在一个大数值下表现的更好">此值在Unix下被硬编码为4,但是在Windows磁盘I/O可能在一个大数值下表现的更好.<a hidden class="anchor" aria-hidden="true" href="#此值在unix下被硬编码为4但是在windows磁盘io可能在一个大数值下表现的更好">#</a></h1>
<p>innodb_file_io_threads = 4</p>
<h1 id="如果你发现innodb表空间损坏-设置此值为一个非零值可能帮助你导出你的表">如果你发现InnoDB表空间损坏, 设置此值为一个非零值可能帮助你导出你的表.<a hidden class="anchor" aria-hidden="true" href="#如果你发现innodb表空间损坏-设置此值为一个非零值可能帮助你导出你的表">#</a></h1>
<h1 id="从1开始并且增加此值知道你能够成功的导出表">从1开始并且增加此值知道你能够成功的导出表.<a hidden class="anchor" aria-hidden="true" href="#从1开始并且增加此值知道你能够成功的导出表">#</a></h1>
<p>#innodb_force_recovery=1</p>
<h1 id="在innodb核心内的允许线程数量">在InnoDb核心内的允许线程数量.<a hidden class="anchor" aria-hidden="true" href="#在innodb核心内的允许线程数量">#</a></h1>
<h1 id="最优值依赖于应用程序硬件以及操作系统的调度方式">最优值依赖于应用程序,硬件以及操作系统的调度方式.<a hidden class="anchor" aria-hidden="true" href="#最优值依赖于应用程序硬件以及操作系统的调度方式">#</a></h1>
<h1 id="过高的值可能导致线程的互斥颠簸">过高的值可能导致线程的互斥颠簸.<a hidden class="anchor" aria-hidden="true" href="#过高的值可能导致线程的互斥颠簸">#</a></h1>
<p>innodb_thread_concurrency = 16</p>
<h1 id="如果设置为1-innodb会在每次提交后刷新fsync事务日志到磁盘上">如果设置为1 ,InnoDB会在每次提交后刷新(fsync)事务日志到磁盘上,<a hidden class="anchor" aria-hidden="true" href="#如果设置为1-innodb会在每次提交后刷新fsync事务日志到磁盘上">#</a></h1>
<h1 id="这提供了完整的acid行为">这提供了完整的ACID行为.<a hidden class="anchor" aria-hidden="true" href="#这提供了完整的acid行为">#</a></h1>
<h1 id="如果你愿意对事务安全折衷--并且你正在运行一个小的食物-你可以设置此值到0或者2来减少由事务日志引起的磁盘io">如果你愿意对事务安全折衷,  并且你正在运行一个小的食物, 你可以设置此值到0或者2来减少由事务日志引起的磁盘I/O<a hidden class="anchor" aria-hidden="true" href="#如果你愿意对事务安全折衷--并且你正在运行一个小的食物-你可以设置此值到0或者2来减少由事务日志引起的磁盘io">#</a></h1>
<h1 id="0代表日志只大约每秒写入日志文件并且日志文件刷新到磁盘">0代表日志只大约每秒写入日志文件并且日志文件刷新到磁盘.<a hidden class="anchor" aria-hidden="true" href="#0代表日志只大约每秒写入日志文件并且日志文件刷新到磁盘">#</a></h1>
<h1 id="2代表日志写入日志文件在每次提交后但是日志文件只有大约每秒才会刷新到磁盘上">2代表日志写入日志文件在每次提交后,但是日志文件只有大约每秒才会刷新到磁盘上.<a hidden class="anchor" aria-hidden="true" href="#2代表日志写入日志文件在每次提交后但是日志文件只有大约每秒才会刷新到磁盘上">#</a></h1>
<p>innodb_flush_log_at_trx_commit = 1</p>
<h1 id="加速innodb的关闭-这会阻止innodb在关闭时做全清除以及插入缓冲合并">加速InnoDB的关闭. 这会阻止InnoDB在关闭时做全清除以及插入缓冲合并.<a hidden class="anchor" aria-hidden="true" href="#加速innodb的关闭-这会阻止innodb在关闭时做全清除以及插入缓冲合并">#</a></h1>
<h1 id="这可能极大增加关机时间--但是取而代之的是innodb可能在下次启动时做这些操作">这可能极大增加关机时间,  但是取而代之的是InnoDB可能在下次启动时做这些操作.<a hidden class="anchor" aria-hidden="true" href="#这可能极大增加关机时间--但是取而代之的是innodb可能在下次启动时做这些操作">#</a></h1>
<p>#innodb_fast_shutdown</p>
<h1 id="用来缓冲日志数据的缓冲区的大小">用来缓冲日志数据的缓冲区的大小.<a hidden class="anchor" aria-hidden="true" href="#用来缓冲日志数据的缓冲区的大小">#</a></h1>
<h1 id="当此值快满时-innodb将必须刷新数据到磁盘上">当此值快满时, InnoDB将必须刷新数据到磁盘上.<a hidden class="anchor" aria-hidden="true" href="#当此值快满时-innodb将必须刷新数据到磁盘上">#</a></h1>
<h1 id="由于基本上每秒都会刷新一次所以没有必要将此值设置的太大甚至对于长事务而言">由于基本上每秒都会刷新一次,所以没有必要将此值设置的太大(甚至对于长事务而言)<a hidden class="anchor" aria-hidden="true" href="#由于基本上每秒都会刷新一次所以没有必要将此值设置的太大甚至对于长事务而言">#</a></h1>
<p>innodb_log_buffer_size = 8M</p>
<h1 id="在日志组中每个日志文件的大小">在日志组中每个日志文件的大小.<a hidden class="anchor" aria-hidden="true" href="#在日志组中每个日志文件的大小">#</a></h1>
<h1 id="你应该设置日志文件总合大小到你缓冲池大小的25100">你应该设置日志文件总合大小到你缓冲池大小的25%~100%<a hidden class="anchor" aria-hidden="true" href="#你应该设置日志文件总合大小到你缓冲池大小的25100">#</a></h1>
<h1 id="来避免在日志文件覆写上不必要的缓冲池刷新行为">来避免在日志文件覆写上不必要的缓冲池刷新行为.<a hidden class="anchor" aria-hidden="true" href="#来避免在日志文件覆写上不必要的缓冲池刷新行为">#</a></h1>
<h1 id="不论如何-请注意一个大的日志文件大小会增加恢复进程所需要的时间">不论如何, 请注意一个大的日志文件大小会增加恢复进程所需要的时间.<a hidden class="anchor" aria-hidden="true" href="#不论如何-请注意一个大的日志文件大小会增加恢复进程所需要的时间">#</a></h1>
<p>innodb_log_file_size = 256M</p>
<h1 id="在日志组中的文件总数">在日志组中的文件总数.<a hidden class="anchor" aria-hidden="true" href="#在日志组中的文件总数">#</a></h1>
<h1 id="通常来说23是比较好的">通常来说2~3是比较好的.<a hidden class="anchor" aria-hidden="true" href="#通常来说23是比较好的">#</a></h1>
<p>innodb_log_files_in_group = 3</p>
<h1 id="innodb的日志文件所在位置-默认是mysql的datadir">InnoDB的日志文件所在位置. 默认是MySQL的datadir.<a hidden class="anchor" aria-hidden="true" href="#innodb的日志文件所在位置-默认是mysql的datadir">#</a></h1>
<h1 id="你可以将其指定到一个独立的硬盘上或者一个raid1卷上来提高其性能">你可以将其指定到一个独立的硬盘上或者一个RAID1卷上来提高其性能<a hidden class="anchor" aria-hidden="true" href="#你可以将其指定到一个独立的硬盘上或者一个raid1卷上来提高其性能">#</a></h1>
<p>#innodb_log_group_home_dir</p>
<h1 id="在innodb缓冲池中最大允许的脏页面的比例">在InnoDB缓冲池中最大允许的脏页面的比例.<a hidden class="anchor" aria-hidden="true" href="#在innodb缓冲池中最大允许的脏页面的比例">#</a></h1>
<h1 id="如果达到限额-innodb会开始刷新他们防止他们妨碍到干净数据页面">如果达到限额, InnoDB会开始刷新他们防止他们妨碍到干净数据页面.<a hidden class="anchor" aria-hidden="true" href="#如果达到限额-innodb会开始刷新他们防止他们妨碍到干净数据页面">#</a></h1>
<h1 id="这是一个软限制不被保证绝对执行">这是一个软限制,不被保证绝对执行.<a hidden class="anchor" aria-hidden="true" href="#这是一个软限制不被保证绝对执行">#</a></h1>
<p>innodb_max_dirty_pages_pct = 90</p>
<h1 id="innodb用来刷新日志的方法">InnoDB用来刷新日志的方法.<a hidden class="anchor" aria-hidden="true" href="#innodb用来刷新日志的方法">#</a></h1>
<h1 id="表空间总是使用双重写入刷新方法">表空间总是使用双重写入刷新方法<a hidden class="anchor" aria-hidden="true" href="#表空间总是使用双重写入刷新方法">#</a></h1>
<h1 id="默认值是-fdatasync-另一个是--o_dsync">默认值是 &ldquo;fdatasync&rdquo;, 另一个是  &ldquo;O_DSYNC&rdquo;.<a hidden class="anchor" aria-hidden="true" href="#默认值是-fdatasync-另一个是--o_dsync">#</a></h1>
<p>#innodb_flush_method=O_DSYNC</p>
<h1 id="在被回滚前一个innodb的事务应该等待一个锁被批准多久">在被回滚前,一个InnoDB的事务应该等待一个锁被批准多久.<a hidden class="anchor" aria-hidden="true" href="#在被回滚前一个innodb的事务应该等待一个锁被批准多久">#</a></h1>
<h1 id="innodb在其拥有的锁表中自动检测事务死锁并且回滚事务">InnoDB在其拥有的锁表中自动检测事务死锁并且回滚事务.<a hidden class="anchor" aria-hidden="true" href="#innodb在其拥有的锁表中自动检测事务死锁并且回滚事务">#</a></h1>
<h1 id="如果你使用--lock-tables-指令-或者在同样事务中使用除了innodb以外的其他事务安全的存储引擎">如果你使用  LOCK TABLES 指令, 或者在同样事务中使用除了InnoDB以外的其他事务安全的存储引擎<a hidden class="anchor" aria-hidden="true" href="#如果你使用--lock-tables-指令-或者在同样事务中使用除了innodb以外的其他事务安全的存储引擎">#</a></h1>
<h1 id="那么一个死锁可能发生而innodb无法注意到">那么一个死锁可能发生而InnoDB无法注意到.<a hidden class="anchor" aria-hidden="true" href="#那么一个死锁可能发生而innodb无法注意到">#</a></h1>
<h1 id="这种情况下这个timeout值对于解决这种问题就非常有帮助">这种情况下这个timeout值对于解决这种问题就非常有帮助.<a hidden class="anchor" aria-hidden="true" href="#这种情况下这个timeout值对于解决这种问题就非常有帮助">#</a></h1>
<p>innodb_lock_wait_timeout =  120</p>
<p>[mysqldump]</p>
<h1 id="不要在将内存中的整个结果写入磁盘之前缓存-在导出非常巨大的表时需要此项">不要在将内存中的整个结果写入磁盘之前缓存. 在导出非常巨大的表时需要此项<a hidden class="anchor" aria-hidden="true" href="#不要在将内存中的整个结果写入磁盘之前缓存-在导出非常巨大的表时需要此项">#</a></h1>
<p>quick</p>
<p>max_allowed_packet = 16M</p>
<p>[mysql]
no-auto-rehash</p>
<h1 id="仅仅允许使用键值的-updates-和--deletes-">仅仅允许使用键值的 UPDATEs 和  DELETEs .<a hidden class="anchor" aria-hidden="true" href="#仅仅允许使用键值的-updates-和--deletes-">#</a></h1>
<p>#safe-updates</p>
<p>[isamchk]
key_buffer = 512M
sort_buffer_size =  512M
read_buffer = 8M
write_buffer =  8M</p>
<p>[myisamchk]
key_buffer = 512M
sort_buffer_size =  512M
read_buffer = 8M
write_buffer =  8M</p>
<p>[mysqlhotcopy]
interactive-timeout</p>
<p>[mysqld_safe]</p>
<h1 id="增加每个进程的可打开文件数量">增加每个进程的可打开文件数量.<a hidden class="anchor" aria-hidden="true" href="#增加每个进程的可打开文件数量">#</a></h1>
<h1 id="警告--确认你已经将全系统限制设定的足够高">警告:  确认你已经将全系统限制设定的足够高!<a hidden class="anchor" aria-hidden="true" href="#警告--确认你已经将全系统限制设定的足够高">#</a></h1>
<h1 id="打开大量表需要将此值设高">打开大量表需要将此值设高<a hidden class="anchor" aria-hidden="true" href="#打开大量表需要将此值设高">#</a></h1>
<p>open-files-limit = 8192 </p>
<p> </p>
<p> </p>
<p><a href="http://hi.baidu.com/liangzhongbo/blog/item/627a5c2e22eeb0584ec226ee.html">http://hi.baidu.com/liangzhongbo/blog/item/627a5c2e22eeb0584ec226ee.html</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="http://example.org/">白天’s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
