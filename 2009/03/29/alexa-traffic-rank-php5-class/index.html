<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Alexa Traffic Rank PHP5 Class | 白天’s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="This PHP5 class utilizes the web service provided by Alexa/Amazon to get the traffic information about the site. You&rsquo;ll need to sign up for an account at Alexa to get the pair (access key and secret key). The first 10,000 queries per month are free. view plaincopy to clipboardprint?
mParams = array( &#39;Service&#39;=&gt;&#39;AlexaWebInfoService&#39;, &#39;AWSAccessKeyId&#39;=&gt;&#39;YOUR ACCESS KEY&#39;, // access key id &#39;Operation&#39;=&gt;&#39;UrlInfo&#39;, &#39;ResponseGroup&#39;=&gt;&#39;Rank&#39;, &#39;Url&#39;=&gt;NULL, &#39;Timestamp&#39;=&gt;gmdate(&#39;Y-m-d\TH:i:s.000\Z&#39;), &#39;Signature&#39;=&gt;NULL, ); $this-&gt;prepareSignature(); } /** ref: http://developer.">
<meta name="author" content="admin">
<link rel="canonical" href="http://example.org/2009/03/29/alexa-traffic-rank-php5-class/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bccfefac377bc340f06c260aed1bddf49a4354816d7c570d6aac75a997986c95.css" integrity="sha256-vM/vrDd7w0DwbCYK7Rvd9JpDVIFtfFcNaqx1qZeYbJU=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://example.org/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://example.org/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://example.org/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://example.org/apple-touch-icon.png">
<link rel="mask-icon" href="http://example.org/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Alexa Traffic Rank PHP5 Class" />
<meta property="og:description" content="This PHP5 class utilizes the web service provided by Alexa/Amazon to get the traffic information about the site. You&rsquo;ll need to sign up for an account at Alexa to get the pair (access key and secret key). The first 10,000 queries per month are free. view plaincopy to clipboardprint?
mParams = array( &#39;Service&#39;=&gt;&#39;AlexaWebInfoService&#39;, &#39;AWSAccessKeyId&#39;=&gt;&#39;YOUR ACCESS KEY&#39;, // access key id &#39;Operation&#39;=&gt;&#39;UrlInfo&#39;, &#39;ResponseGroup&#39;=&gt;&#39;Rank&#39;, &#39;Url&#39;=&gt;NULL, &#39;Timestamp&#39;=&gt;gmdate(&#39;Y-m-d\TH:i:s.000\Z&#39;), &#39;Signature&#39;=&gt;NULL, ); $this-&gt;prepareSignature(); } /** ref: http://developer." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/2009/03/29/alexa-traffic-rank-php5-class/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2009-03-29T16:35:31+00:00" />
<meta property="article:modified_time" content="2009-03-29T16:35:31+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Alexa Traffic Rank PHP5 Class"/>
<meta name="twitter:description" content="This PHP5 class utilizes the web service provided by Alexa/Amazon to get the traffic information about the site. You&rsquo;ll need to sign up for an account at Alexa to get the pair (access key and secret key). The first 10,000 queries per month are free. view plaincopy to clipboardprint?
mParams = array( &#39;Service&#39;=&gt;&#39;AlexaWebInfoService&#39;, &#39;AWSAccessKeyId&#39;=&gt;&#39;YOUR ACCESS KEY&#39;, // access key id &#39;Operation&#39;=&gt;&#39;UrlInfo&#39;, &#39;ResponseGroup&#39;=&gt;&#39;Rank&#39;, &#39;Url&#39;=&gt;NULL, &#39;Timestamp&#39;=&gt;gmdate(&#39;Y-m-d\TH:i:s.000\Z&#39;), &#39;Signature&#39;=&gt;NULL, ); $this-&gt;prepareSignature(); } /** ref: http://developer."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://example.org/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Alexa Traffic Rank PHP5 Class",
      "item": "http://example.org/2009/03/29/alexa-traffic-rank-php5-class/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Alexa Traffic Rank PHP5 Class",
  "name": "Alexa Traffic Rank PHP5 Class",
  "description": "This PHP5 class utilizes the web service provided by Alexa/Amazon to get the traffic information about the site. You\u0026rsquo;ll need to sign up for an account at Alexa to get the pair (access key and secret key). The first 10,000 queries per month are free. view plaincopy to clipboardprint?\nmParams = array( 'Service'=\u0026gt;'AlexaWebInfoService', 'AWSAccessKeyId'=\u0026gt;'YOUR ACCESS KEY', // access key id 'Operation'=\u0026gt;'UrlInfo', 'ResponseGroup'=\u0026gt;'Rank', 'Url'=\u0026gt;NULL, 'Timestamp'=\u0026gt;gmdate('Y-m-d\\TH:i:s.000\\Z'), 'Signature'=\u0026gt;NULL, ); $this-\u0026gt;prepareSignature(); } /** ref: http://developer.",
  "keywords": [
    
  ],
  "articleBody": "This PHP5 class utilizes the web service provided by Alexa/Amazon to get the traffic information about the site. You’ll need to sign up for an account at Alexa to get the pair (access key and secret key). The first 10,000 queries per month are free. view plaincopy to clipboardprint?\nmParams = array( 'Service'=\u003e'AlexaWebInfoService', 'AWSAccessKeyId'=\u003e'YOUR ACCESS KEY', // access key id 'Operation'=\u003e'UrlInfo', 'ResponseGroup'=\u003e'Rank', 'Url'=\u003eNULL, 'Timestamp'=\u003egmdate('Y-m-d\\TH:i:s.000\\Z'), 'Signature'=\u003eNULL, ); $this-\u003eprepareSignature(); } /** ref: http://developer.amazonwebservices.com/connect/thread.jspa?threadID=9675 */ private function calculate_RFC2104HMAC ($data, $key) { return base64_encode( pack(\"H*\", sha1((str_pad($key, 64, chr(0x00)) ^(str_repeat(chr(0x5c), 64))) . pack(\"H*\", sha1((str_pad($key, 64, chr(0x00)) ^(str_repeat(chr(0x36), 64))) . $data)))) ); } /** have the signature ready */ private function prepareSignature() { $vData = $this-\u003emParams['Service'].$this-\u003emParams['Operation'].$this-\u003emParams['Timestamp']; $this-\u003emParams['Signature'] = $this-\u003ecalculate_RFC2104HMAC($vData,$this-\u003emSecretKey); } /** make the rest call and return result as XML object */ function call() { $vURL = 'http://awis.amazonaws.com/onca/xml?'; $vTmp = array(); foreach ($this-\u003emParams AS $vKey=\u003e$vValue) { $vTmp[] = $vKey.'='.$vValue; } // rof $vURL .= implode('\u0026',$vTmp); $vFile = file_get_contents($vURL); $vXML = simplexml_load_string($vFile); return $vXML; } /** get the rank for a domain */ function getRank($pDomain) { $this-\u003emParams['Url'] = $pDomain; $vResult = $this-\u003ecall(); $vResult = $vResult-\u003eUrlInfoResult-\u003eAlexa-\u003eTrafficData-\u003eRank+0; return $vResult; } } ?\u003e mParams = array( 'Service'=\u003e'AlexaWebInfoService', 'AWSAccessKeyId'=\u003e'YOUR ACCESS KEY', // access key id 'Operation'=\u003e'UrlInfo', 'ResponseGroup'=\u003e'Rank', 'Url'=\u003eNULL, 'Timestamp'=\u003egmdate('Y-m-d\\TH:i:s.000\\Z'), 'Signature'=\u003eNULL, ); $this-\u003eprepareSignature(); } /** ref: http://developer.amazonwebservices.com/connect/thread.jspa?threadID=9675 */ private function calculate_RFC2104HMAC ($data, $key) { return base64_encode( pack(\"H*\", sha1((str_pad($key, 64, chr(0x00)) ^(str_repeat(chr(0x5c), 64))) . pack(\"H*\", sha1((str_pad($key, 64, chr(0x00)) ^(str_repeat(chr(0x36), 64))) . $data)))) ); } /** have the signature ready */ private function prepareSignature() { $vData = $this-\u003emParams['Service'].$this-\u003emParams['Operation'].$this-\u003emParams['Timestamp']; $this-\u003emParams['Signature'] = $this-\u003ecalculate_RFC2104HMAC($vData,$this-\u003emSecretKey); } /** make the rest call and return result as XML object */ function call() { $vURL = 'http://awis.amazonaws.com/onca/xml?'; $vTmp = array(); foreach ($this-\u003emParams AS $vKey=\u003e$vValue) { $vTmp[] = $vKey.'='.$vValue; } // rof $vURL .= implode('\u0026',$vTmp); $vFile = file_get_contents($vURL); $vXML = simplexml_load_string($vFile); return $vXML; } /** get the rank for a domain */ function getRank($pDomain) { $this-\u003emParams['Url'] = $pDomain; $vResult = $this-\u003ecall(); $vResult = $vResult-\u003eUrlInfoResult-\u003eAlexa-\u003eTrafficData-\u003eRank+0; return $vResult; } } ?\u003e Sample Usage: view plaincopy to clipboardprint?\n$vAlexa = new CAlexaAPI(); $vResult = $vAlexa-\u003egetRank('www.adspeed.com'); var_dump($vResult); // return int 23974 $vAlexa = new CAlexaAPI(); $vResult = $vAlexa-\u003egetRank('www.adspeed.com'); var_dump($vResult); // return int 23974 原文http://www.adspeed.org/2006/03/alexa-traffic-rank-php5-class.html\n",
  "wordCount" : "348",
  "inLanguage": "en",
  "datePublished": "2009-03-29T16:35:31Z",
  "dateModified": "2009-03-29T16:35:31Z",
  "author":{
    "@type": "Person",
    "name": "admin"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://example.org/2009/03/29/alexa-traffic-rank-php5-class/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "白天’s Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "http://example.org/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://example.org/" accesskey="h" title="白天’s Blog (Alt + H)">白天’s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Alexa Traffic Rank PHP5 Class
    </h1>
    <div class="post-meta"><span title='2009-03-29 16:35:31 +0000 UTC'>March 29, 2009</span>&nbsp;·&nbsp;admin

</div>
  </header> 
  <div class="post-content"><p>This PHP5 class utilizes the web service provided by Alexa/Amazon to get the traffic information about the site. You&rsquo;ll need to sign up for an account at Alexa to get the pair (access key and secret key). The first 10,000 queries per month are free. view plaincopy to clipboardprint?</p>
<pre><code>mParams = array(   
      'Service'=&gt;'AlexaWebInfoService',   
      'AWSAccessKeyId'=&gt;'YOUR ACCESS KEY', // access key id   
      'Operation'=&gt;'UrlInfo',   
      'ResponseGroup'=&gt;'Rank',   
      'Url'=&gt;NULL,   
      'Timestamp'=&gt;gmdate('Y-m-d\TH:i:s.000\Z'),   
      'Signature'=&gt;NULL,   
    );   
    $this-&gt;prepareSignature();   
  }   
  
  /** ref: http://developer.amazonwebservices.com/connect/thread.jspa?threadID=9675 */  
  private function calculate_RFC2104HMAC ($data, $key) {   
    return base64_encode(   
      pack(&quot;H*&quot;, sha1((str_pad($key, 64, chr(0x00))   
      ^(str_repeat(chr(0x5c), 64))) .   
      pack(&quot;H*&quot;, sha1((str_pad($key, 64, chr(0x00))   
      ^(str_repeat(chr(0x36), 64))) . $data))))   
    );   
  }   
  
  
  /** have the signature ready */  
  private function prepareSignature() {   
    $vData = $this-&gt;mParams['Service'].$this-&gt;mParams['Operation'].$this-&gt;mParams['Timestamp'];   
    $this-&gt;mParams['Signature'] = $this-&gt;calculate_RFC2104HMAC($vData,$this-&gt;mSecretKey);   
  }   
     
  
  /** make the rest call and return result as XML object */  
  function call() {   
    $vURL = 'http://awis.amazonaws.com/onca/xml?';   
    $vTmp = array();   
    foreach ($this-&gt;mParams AS $vKey=&gt;$vValue) {   
      $vTmp[] = $vKey.'='.$vValue;   
    } // rof   
    $vURL .= implode('&amp;',$vTmp);   
    $vFile = file_get_contents($vURL);   
    $vXML = simplexml_load_string($vFile);   
    return $vXML;   
  }   
  
  /** get the rank for a domain */  
  function getRank($pDomain) {   
    $this-&gt;mParams['Url'] = $pDomain;   
    $vResult = $this-&gt;call();   
    $vResult = $vResult-&gt;UrlInfoResult-&gt;Alexa-&gt;TrafficData-&gt;Rank+0;   
    return $vResult;   
  }   
}   
?&gt;  
mParams = array(
      'Service'=&gt;'AlexaWebInfoService',
      'AWSAccessKeyId'=&gt;'YOUR ACCESS KEY', // access key id
      'Operation'=&gt;'UrlInfo',
      'ResponseGroup'=&gt;'Rank',
      'Url'=&gt;NULL,
      'Timestamp'=&gt;gmdate('Y-m-d\TH:i:s.000\Z'),
      'Signature'=&gt;NULL,
    );
    $this-&gt;prepareSignature();
  }

  /** ref: http://developer.amazonwebservices.com/connect/thread.jspa?threadID=9675 */
  private function calculate_RFC2104HMAC ($data, $key) {
    return base64_encode(
      pack(&quot;H*&quot;, sha1((str_pad($key, 64, chr(0x00))
      ^(str_repeat(chr(0x5c), 64))) .
      pack(&quot;H*&quot;, sha1((str_pad($key, 64, chr(0x00))
      ^(str_repeat(chr(0x36), 64))) . $data))))
    );
  }


  /** have the signature ready */
  private function prepareSignature() {
    $vData = $this-&gt;mParams['Service'].$this-&gt;mParams['Operation'].$this-&gt;mParams['Timestamp'];
    $this-&gt;mParams['Signature'] = $this-&gt;calculate_RFC2104HMAC($vData,$this-&gt;mSecretKey);
  }
  

  /** make the rest call and return result as XML object */
  function call() {
    $vURL = 'http://awis.amazonaws.com/onca/xml?';
    $vTmp = array();
    foreach ($this-&gt;mParams AS $vKey=&gt;$vValue) {
      $vTmp[] = $vKey.'='.$vValue;
    } // rof
    $vURL .= implode('&amp;',$vTmp);
    $vFile = file_get_contents($vURL);
    $vXML = simplexml_load_string($vFile);
    return $vXML;
  }

  /** get the rank for a domain */
  function getRank($pDomain) {
    $this-&gt;mParams['Url'] = $pDomain;
    $vResult = $this-&gt;call();
    $vResult = $vResult-&gt;UrlInfoResult-&gt;Alexa-&gt;TrafficData-&gt;Rank+0;
    return $vResult;
  }
}
?&gt;
</code></pre>
<p>Sample Usage: view plaincopy to clipboardprint?</p>
<pre><code>$vAlexa = new CAlexaAPI();   
$vResult = $vAlexa-&gt;getRank('www.adspeed.com');   
var_dump($vResult); // return int 23974  
$vAlexa = new CAlexaAPI();
$vResult = $vAlexa-&gt;getRank('www.adspeed.com');
var_dump($vResult); // return int 23974
</code></pre>
<p>原文http://www.adspeed.org/2006/03/alexa-traffic-rank-php5-class.html</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="http://example.org/">白天’s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
