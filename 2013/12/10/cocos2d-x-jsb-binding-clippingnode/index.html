<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>cocos2d-x jsb 绑定 ClippingNode | 白天’s Blog</title>
<meta name="keywords" content="
ClippingNode
      , 
cocos2d-x
      , 
jsb
      ">
<meta name="description" content="JSClass *jsb_ClippingNode_class; JSObject *jsb_ClippingNode_prototype; JSBool js_cocos2dx_ClippingNode_isInverted(JSContext *cx, uint32_t argc, jsval *vp) { JSObject *obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-&gt;ptr : NULL); JSB_PRECONDITION2( cobj, cx, JS_FALSE, &quot;Invalid Native Object&quot;); if (argc == 0) { bool ret = cobj-&gt;isInverted(); jsval jsret; jsret = BOOLEAN_TO_JSVAL(ret); JS_SET_RVAL(cx, vp, jsret); return JS_TRUE; } JS_ReportError(cx, &quot;wrong number of arguments: %d, was expecting %d&quot;, argc, 0); return JS_FALSE; } JSBool js_cocos2dx_ClippingNode_visit(JSContext *cx, uint32_t argc, jsval *vp) { JSObject *obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ?">
<meta name="author" content="admin">
<link rel="canonical" href="http://example.org/2013/12/10/cocos2d-x-jsb-binding-clippingnode/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bccfefac377bc340f06c260aed1bddf49a4354816d7c570d6aac75a997986c95.css" integrity="sha256-vM/vrDd7w0DwbCYK7Rvd9JpDVIFtfFcNaqx1qZeYbJU=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://example.org/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://example.org/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://example.org/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://example.org/apple-touch-icon.png">
<link rel="mask-icon" href="http://example.org/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="cocos2d-x jsb 绑定 ClippingNode" />
<meta property="og:description" content="JSClass *jsb_ClippingNode_class; JSObject *jsb_ClippingNode_prototype; JSBool js_cocos2dx_ClippingNode_isInverted(JSContext *cx, uint32_t argc, jsval *vp) { JSObject *obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-&gt;ptr : NULL); JSB_PRECONDITION2( cobj, cx, JS_FALSE, &quot;Invalid Native Object&quot;); if (argc == 0) { bool ret = cobj-&gt;isInverted(); jsval jsret; jsret = BOOLEAN_TO_JSVAL(ret); JS_SET_RVAL(cx, vp, jsret); return JS_TRUE; } JS_ReportError(cx, &quot;wrong number of arguments: %d, was expecting %d&quot;, argc, 0); return JS_FALSE; } JSBool js_cocos2dx_ClippingNode_visit(JSContext *cx, uint32_t argc, jsval *vp) { JSObject *obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/2013/12/10/cocos2d-x-jsb-binding-clippingnode/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-12-10T13:29:54+00:00" />
<meta property="article:modified_time" content="2013-12-10T13:29:54+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="cocos2d-x jsb 绑定 ClippingNode"/>
<meta name="twitter:description" content="JSClass *jsb_ClippingNode_class; JSObject *jsb_ClippingNode_prototype; JSBool js_cocos2dx_ClippingNode_isInverted(JSContext *cx, uint32_t argc, jsval *vp) { JSObject *obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-&gt;ptr : NULL); JSB_PRECONDITION2( cobj, cx, JS_FALSE, &quot;Invalid Native Object&quot;); if (argc == 0) { bool ret = cobj-&gt;isInverted(); jsval jsret; jsret = BOOLEAN_TO_JSVAL(ret); JS_SET_RVAL(cx, vp, jsret); return JS_TRUE; } JS_ReportError(cx, &quot;wrong number of arguments: %d, was expecting %d&quot;, argc, 0); return JS_FALSE; } JSBool js_cocos2dx_ClippingNode_visit(JSContext *cx, uint32_t argc, jsval *vp) { JSObject *obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ?"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://example.org/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "cocos2d-x jsb 绑定 ClippingNode",
      "item": "http://example.org/2013/12/10/cocos2d-x-jsb-binding-clippingnode/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "cocos2d-x jsb 绑定 ClippingNode",
  "name": "cocos2d-x jsb 绑定 ClippingNode",
  "description": "JSClass *jsb_ClippingNode_class; JSObject *jsb_ClippingNode_prototype; JSBool js_cocos2dx_ClippingNode_isInverted(JSContext *cx, uint32_t argc, jsval *vp) { JSObject *obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-\u0026gt;ptr : NULL); JSB_PRECONDITION2( cobj, cx, JS_FALSE, \u0026quot;Invalid Native Object\u0026quot;); if (argc == 0) { bool ret = cobj-\u0026gt;isInverted(); jsval jsret; jsret = BOOLEAN_TO_JSVAL(ret); JS_SET_RVAL(cx, vp, jsret); return JS_TRUE; } JS_ReportError(cx, \u0026quot;wrong number of arguments: %d, was expecting %d\u0026quot;, argc, 0); return JS_FALSE; } JSBool js_cocos2dx_ClippingNode_visit(JSContext *cx, uint32_t argc, jsval *vp) { JSObject *obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ?",
  "keywords": [
    "\nClippingNode\n      ", "\ncocos2d-x\n      ", "\njsb\n      "
  ],
  "articleBody": "JSClass *jsb_ClippingNode_class; JSObject *jsb_ClippingNode_prototype; JSBool js_cocos2dx_ClippingNode_isInverted(JSContext *cx, uint32_t argc, jsval *vp) { JSObject *obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-\u003eptr : NULL); JSB_PRECONDITION2( cobj, cx, JS_FALSE, \"Invalid Native Object\"); if (argc == 0) { bool ret = cobj-\u003eisInverted(); jsval jsret; jsret = BOOLEAN_TO_JSVAL(ret); JS_SET_RVAL(cx, vp, jsret); return JS_TRUE; } JS_ReportError(cx, \"wrong number of arguments: %d, was expecting %d\", argc, 0); return JS_FALSE; } JSBool js_cocos2dx_ClippingNode_visit(JSContext *cx, uint32_t argc, jsval *vp) { JSObject *obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-\u003eptr : NULL); JSB_PRECONDITION2( cobj, cx, JS_FALSE, \"Invalid Native Object\"); if (argc == 0) { cobj-\u003evisit(); JS_SET_RVAL(cx, vp, JSVAL_VOID); return JS_TRUE; } JS_ReportError(cx, \"wrong number of arguments: %d, was expecting %d\", argc, 0); return JS_FALSE; } JSBool js_cocos2dx_ClippingNode_setInverted(JSContext *cx, uint32_t argc, jsval *vp) { jsval *argv = JS_ARGV(cx, vp); JSBool ok = JS_TRUE; JSObject *obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-\u003eptr : NULL); JSB_PRECONDITION2( cobj, cx, JS_FALSE, \"Invalid Native Object\"); if (argc == 1) { JSBool arg0; ok \u0026= JS_ValueToBoolean(cx, argv[0], \u0026arg0;); JSB_PRECONDITION2(ok, cx, JS_FALSE, \"Error processing arguments\"); cobj-\u003esetInverted(arg0); JS_SET_RVAL(cx, vp, JSVAL_VOID); return JS_TRUE; } JS_ReportError(cx, \"wrong number of arguments: %d, was expecting %d\", argc, 1); return JS_FALSE; } JSBool js_cocos2dx_ClippingNode_setStencil(JSContext *cx, uint32_t argc, jsval *vp) { jsval *argv = JS_ARGV(cx, vp); JSBool ok = JS_TRUE; JSObject *obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-\u003eptr : NULL); JSB_PRECONDITION2( cobj, cx, JS_FALSE, \"Invalid Native Object\"); if (argc == 1) { cocos2d::CCNode* arg0; do { if (!argv[0].isObject()) { ok = JS_FALSE; break; } js_proxy_t *proxy; JSObject *tmpObj = JSVAL_TO_OBJECT(argv[0]); proxy = jsb_get_js_proxy(tmpObj); arg0 = (cocos2d::CCNode*)(proxy ? proxy-\u003eptr : NULL); JSB_PRECONDITION2( arg0, cx, JS_FALSE, \"Invalid Native Object\"); } while (0); JSB_PRECONDITION2(ok, cx, JS_FALSE, \"Error processing arguments\"); cobj-\u003esetStencil(arg0); JS_SET_RVAL(cx, vp, JSVAL_VOID); return JS_TRUE; } JS_ReportError(cx, \"wrong number of arguments: %d, was expecting %d\", argc, 1); return JS_FALSE; } JSBool js_cocos2dx_ClippingNode_getAlphaThreshold(JSContext *cx, uint32_t argc, jsval *vp) { JSObject *obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-\u003eptr : NULL); JSB_PRECONDITION2( cobj, cx, JS_FALSE, \"Invalid Native Object\"); if (argc == 0) { float ret = cobj-\u003egetAlphaThreshold(); jsval jsret; jsret = DOUBLE_TO_JSVAL(ret); JS_SET_RVAL(cx, vp, jsret); return JS_TRUE; } JS_ReportError(cx, \"wrong number of arguments: %d, was expecting %d\", argc, 0); return JS_FALSE; } JSBool js_cocos2dx_ClippingNode_init(JSContext *cx, uint32_t argc, jsval *vp) { jsval *argv = JS_ARGV(cx, vp); JSBool ok = JS_TRUE; JSObject *obj = NULL; cocos2d::CCClippingNode* cobj = NULL; obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-\u003eptr : NULL); JSB_PRECONDITION2( cobj, cx, JS_FALSE, \"Invalid Native Object\"); do { if (argc == 1) { cocos2d::CCNode* arg0; do { if (!argv[0].isObject()) { ok = JS_FALSE; break; } js_proxy_t *proxy; JSObject *tmpObj = JSVAL_TO_OBJECT(argv[0]); proxy = jsb_get_js_proxy(tmpObj); arg0 = (cocos2d::CCNode*)(proxy ? proxy-\u003eptr : NULL); JSB_PRECONDITION2( arg0, cx, JS_FALSE, \"Invalid Native Object\"); } while (0); if (!ok) { ok = JS_TRUE; break; } bool ret = cobj-\u003einit(arg0); jsval jsret; jsret = BOOLEAN_TO_JSVAL(ret); JS_SET_RVAL(cx, vp, jsret); return JS_TRUE; } } while(0); do { if (argc == 0) { bool ret = cobj-\u003einit(); jsval jsret; jsret = BOOLEAN_TO_JSVAL(ret); JS_SET_RVAL(cx, vp, jsret); return JS_TRUE; } } while(0); JS_ReportError(cx, \"wrong number of arguments\"); return JS_FALSE; } JSBool js_cocos2dx_ClippingNode_getStencil(JSContext *cx, uint32_t argc, jsval *vp) { JSObject *obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-\u003eptr : NULL); JSB_PRECONDITION2( cobj, cx, JS_FALSE, \"Invalid Native Object\"); if (argc == 0) { cocos2d::CCNode* ret = cobj-\u003egetStencil(); jsval jsret; do { if (ret) { js_proxy_t *proxy = js_get_or_create_proxy(cx, ret); jsret = OBJECT_TO_JSVAL(proxy-\u003eobj); } else { jsret = JSVAL_NULL; } } while (0); JS_SET_RVAL(cx, vp, jsret); return JS_TRUE; } JS_ReportError(cx, \"wrong number of arguments: %d, was expecting %d\", argc, 0); return JS_FALSE; } JSBool js_cocos2dx_ClippingNode_setAlphaThreshold(JSContext *cx, uint32_t argc, jsval *vp) { jsval *argv = JS_ARGV(cx, vp); JSBool ok = JS_TRUE; JSObject *obj = JS_THIS_OBJECT(cx, vp); js_proxy_t *proxy = jsb_get_js_proxy(obj); cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-\u003eptr : NULL); JSB_PRECONDITION2( cobj, cx, JS_FALSE, \"Invalid Native Object\"); if (argc == 1) { double arg0; ok \u0026= JS_ValueToNumber(cx, argv[0], \u0026arg0;); JSB_PRECONDITION2(ok, cx, JS_FALSE, \"Error processing arguments\"); cobj-\u003esetAlphaThreshold(arg0); JS_SET_RVAL(cx, vp, JSVAL_VOID); return JS_TRUE; } JS_ReportError(cx, \"wrong number of arguments: %d, was expecting %d\", argc, 1); return JS_FALSE; } JSBool js_cocos2dx_ClippingNode_create(JSContext *cx, uint32_t argc, jsval *vp) { jsval *argv = JS_ARGV(cx, vp); JSBool ok = JS_TRUE; do { if (argc == 1) { cocos2d::CCNode* arg0; do { if (!argv[0].isObject()) { ok = JS_FALSE; break; } js_proxy_t *proxy; JSObject *tmpObj = JSVAL_TO_OBJECT(argv[0]); proxy = jsb_get_js_proxy(tmpObj); arg0 = (cocos2d::CCNode*)(proxy ? proxy-\u003eptr : NULL); JSB_PRECONDITION2( arg0, cx, JS_FALSE, \"Invalid Native Object\"); } while (0); if (!ok) { ok = JS_TRUE; break; } cocos2d::CCClippingNode* ret = cocos2d::CCClippingNode::create(arg0); jsval jsret; do { if (ret) { js_proxy_t *proxy = js_get_or_create_proxy(cx, ret); jsret = OBJECT_TO_JSVAL(proxy-\u003eobj); } else { jsret = JSVAL_NULL; } } while (0); JS_SET_RVAL(cx, vp, jsret); return JS_TRUE; } } while (0); do { if (argc == 0) { cocos2d::CCClippingNode* ret = cocos2d::CCClippingNode::create(); jsval jsret; do { if (ret) { js_proxy_t *proxy = js_get_or_create_proxy(cx, ret); jsret = OBJECT_TO_JSVAL(proxy-\u003eobj); } else { jsret = JSVAL_NULL; } } while (0); JS_SET_RVAL(cx, vp, jsret); return JS_TRUE; } } while (0); JS_ReportError(cx, \"wrong number of arguments\"); return JS_FALSE; } extern JSObject *jsb_CCNode_prototype; void js_cocos2dx_ClippingNode_finalize(JSFreeOp *fop, JSObject *obj) { CCLOGINFO(\"jsbindings: finalizing JS object %p (ClippingNode)\", obj); } void js_register_cocos2dx_ClippingNode(JSContext *cx, JSObject *global) { jsb_ClippingNode_class = (JSClass *)calloc(1, sizeof(JSClass)); jsb_ClippingNode_class-\u003ename = \"ClippingNode\"; jsb_ClippingNode_class-\u003eaddProperty = JS_PropertyStub; jsb_ClippingNode_class-\u003edelProperty = JS_PropertyStub; jsb_ClippingNode_class-\u003egetProperty = JS_PropertyStub; jsb_ClippingNode_class-\u003esetProperty = JS_StrictPropertyStub; jsb_ClippingNode_class-\u003eenumerate = JS_EnumerateStub; jsb_ClippingNode_class-\u003eresolve = JS_ResolveStub; jsb_ClippingNode_class-\u003econvert = JS_ConvertStub; jsb_ClippingNode_class-\u003efinalize = js_cocos2dx_ClippingNode_finalize; jsb_ClippingNode_class-\u003eflags = JSCLASS_HAS_RESERVED_SLOTS(2); static JSPropertySpec properties[] = { {0, 0, 0, JSOP_NULLWRAPPER, JSOP_NULLWRAPPER} }; static JSFunctionSpec funcs[] = { JS_FN(\"isInverted\", js_cocos2dx_ClippingNode_isInverted, 0, JSPROP_PERMANENT | JSPROP_ENUMERATE), JS_FN(\"visit\", js_cocos2dx_ClippingNode_visit, 0, JSPROP_PERMANENT | JSPROP_ENUMERATE), JS_FN(\"setInverted\", js_cocos2dx_ClippingNode_setInverted, 1, JSPROP_PERMANENT | JSPROP_ENUMERATE), JS_FN(\"setStencil\", js_cocos2dx_ClippingNode_setStencil, 1, JSPROP_PERMANENT | JSPROP_ENUMERATE), JS_FN(\"getAlphaThreshold\", js_cocos2dx_ClippingNode_getAlphaThreshold, 0, JSPROP_PERMANENT | JSPROP_ENUMERATE), JS_FN(\"init\", js_cocos2dx_ClippingNode_init, 0, JSPROP_PERMANENT | JSPROP_ENUMERATE), JS_FN(\"getStencil\", js_cocos2dx_ClippingNode_getStencil, 0, JSPROP_PERMANENT | JSPROP_ENUMERATE), JS_FN(\"setAlphaThreshold\", js_cocos2dx_ClippingNode_setAlphaThreshold, 1, JSPROP_PERMANENT | JSPROP_ENUMERATE), JS_FS_END }; static JSFunctionSpec st_funcs[] = { JS_FN(\"create\", js_cocos2dx_ClippingNode_create, 0, JSPROP_PERMANENT | JSPROP_ENUMERATE), JS_FS_END }; jsb_ClippingNode_prototype = JS_InitClass( cx, global, jsb_CCNode_prototype, jsb_ClippingNode_class, empty_constructor, 0, properties, funcs, NULL, // no static properties st_funcs); // make the class enumerable in the registered namespace JSBool found; JS_SetPropertyAttributes(cx, global, \"ClippingNode\", JSPROP_ENUMERATE | JSPROP_READONLY, \u0026found;); // add the proto and JSClass to the type-\u003ejs info hash table TypeTest t; js_type_class_t *p; uint32_t typeId = t.s_id(); HASH_FIND_INT(_js_global_type_ht, \u0026typeId;, p); if (!p) { p = (js_type_class_t *)malloc(sizeof(js_type_class_t)); p-\u003etype = typeId; p-\u003ejsclass = jsb_ClippingNode_class; p-\u003eproto = jsb_ClippingNode_prototype; p-\u003eparentProto = jsb_CCNode_prototype; HASH_ADD_INT(_js_global_type_ht, type, p); } } cocos2d-x 3.0 已经帮定，本代码在 cocos2d-x 2.1.5 下测试通过\n",
  "wordCount" : "1094",
  "inLanguage": "en",
  "datePublished": "2013-12-10T13:29:54Z",
  "dateModified": "2013-12-10T13:29:54Z",
  "author":{
    "@type": "Person",
    "name": "admin"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://example.org/2013/12/10/cocos2d-x-jsb-binding-clippingnode/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "白天’s Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "http://example.org/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://example.org/" accesskey="h" title="白天’s Blog (Alt + H)">白天’s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      cocos2d-x jsb 绑定 ClippingNode
    </h1>
    <div class="post-meta"><span title='2013-12-10 13:29:54 +0000 UTC'>December 10, 2013</span>&nbsp;·&nbsp;admin

</div>
  </header> 
  <div class="post-content"><pre><code>JSClass  *jsb_ClippingNode_class;
JSObject *jsb_ClippingNode_prototype;

JSBool js_cocos2dx_ClippingNode_isInverted(JSContext *cx, uint32_t argc, jsval *vp)
{
        JSObject *obj = JS_THIS_OBJECT(cx, vp);
        js_proxy_t *proxy = jsb_get_js_proxy(obj);
        cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-&gt;ptr : NULL);
        JSB_PRECONDITION2( cobj, cx, JS_FALSE, &quot;Invalid Native Object&quot;);
        if (argc == 0) {
                bool ret = cobj-&gt;isInverted();
                jsval jsret;
                jsret = BOOLEAN_TO_JSVAL(ret);
                JS_SET_RVAL(cx, vp, jsret);
                return JS_TRUE;
        }
    
        JS_ReportError(cx, &quot;wrong number of arguments: %d, was expecting %d&quot;, argc, 0);
        return JS_FALSE;
}
JSBool js_cocos2dx_ClippingNode_visit(JSContext *cx, uint32_t argc, jsval *vp)
{
        JSObject *obj = JS_THIS_OBJECT(cx, vp);
        js_proxy_t *proxy = jsb_get_js_proxy(obj);
        cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-&gt;ptr : NULL);
        JSB_PRECONDITION2( cobj, cx, JS_FALSE, &quot;Invalid Native Object&quot;);
        if (argc == 0) {
                cobj-&gt;visit();
                JS_SET_RVAL(cx, vp, JSVAL_VOID);
                return JS_TRUE;
        }
    
        JS_ReportError(cx, &quot;wrong number of arguments: %d, was expecting %d&quot;, argc, 0);
        return JS_FALSE;
}
JSBool js_cocos2dx_ClippingNode_setInverted(JSContext *cx, uint32_t argc, jsval *vp)
{
        jsval *argv = JS_ARGV(cx, vp);
        JSBool ok = JS_TRUE;
        JSObject *obj = JS_THIS_OBJECT(cx, vp);
        js_proxy_t *proxy = jsb_get_js_proxy(obj);
        cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-&gt;ptr : NULL);
        JSB_PRECONDITION2( cobj, cx, JS_FALSE, &quot;Invalid Native Object&quot;);
        if (argc == 1) {
                JSBool arg0;
                ok &amp;= JS_ValueToBoolean(cx, argv[0], &amp;arg0;);
                JSB_PRECONDITION2(ok, cx, JS_FALSE, &quot;Error processing arguments&quot;);
                cobj-&gt;setInverted(arg0);
                JS_SET_RVAL(cx, vp, JSVAL_VOID);
                return JS_TRUE;
        }
    
        JS_ReportError(cx, &quot;wrong number of arguments: %d, was expecting %d&quot;, argc, 1);
        return JS_FALSE;
}
JSBool js_cocos2dx_ClippingNode_setStencil(JSContext *cx, uint32_t argc, jsval *vp)
{
        jsval *argv = JS_ARGV(cx, vp);
        JSBool ok = JS_TRUE;
        JSObject *obj = JS_THIS_OBJECT(cx, vp);
        js_proxy_t *proxy = jsb_get_js_proxy(obj);
        cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-&gt;ptr : NULL);
        JSB_PRECONDITION2( cobj, cx, JS_FALSE, &quot;Invalid Native Object&quot;);
        if (argc == 1) {
                cocos2d::CCNode* arg0;
                do {
                        if (!argv[0].isObject()) { ok = JS_FALSE; break; }
                        js_proxy_t *proxy;
                        JSObject *tmpObj = JSVAL_TO_OBJECT(argv[0]);
                        proxy = jsb_get_js_proxy(tmpObj);
                        arg0 = (cocos2d::CCNode*)(proxy ? proxy-&gt;ptr : NULL);
                        JSB_PRECONDITION2( arg0, cx, JS_FALSE, &quot;Invalid Native Object&quot;);
                } while (0);
                JSB_PRECONDITION2(ok, cx, JS_FALSE, &quot;Error processing arguments&quot;);
                cobj-&gt;setStencil(arg0);
                JS_SET_RVAL(cx, vp, JSVAL_VOID);
                return JS_TRUE;
        }
    
        JS_ReportError(cx, &quot;wrong number of arguments: %d, was expecting %d&quot;, argc, 1);
        return JS_FALSE;
}
JSBool js_cocos2dx_ClippingNode_getAlphaThreshold(JSContext *cx, uint32_t argc, jsval *vp)
{
        JSObject *obj = JS_THIS_OBJECT(cx, vp);
        js_proxy_t *proxy = jsb_get_js_proxy(obj);
        cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-&gt;ptr : NULL);
        JSB_PRECONDITION2( cobj, cx, JS_FALSE, &quot;Invalid Native Object&quot;);
        if (argc == 0) {
                float ret = cobj-&gt;getAlphaThreshold();
                jsval jsret;
                jsret = DOUBLE_TO_JSVAL(ret);
                JS_SET_RVAL(cx, vp, jsret);
                return JS_TRUE;
        }
    
        JS_ReportError(cx, &quot;wrong number of arguments: %d, was expecting %d&quot;, argc, 0);
        return JS_FALSE;
}
JSBool js_cocos2dx_ClippingNode_init(JSContext *cx, uint32_t argc, jsval *vp)
{
        jsval *argv = JS_ARGV(cx, vp);
        JSBool ok = JS_TRUE;
    
        JSObject *obj = NULL;
        cocos2d::CCClippingNode* cobj = NULL;
        obj = JS_THIS_OBJECT(cx, vp);
        js_proxy_t *proxy = jsb_get_js_proxy(obj);
        cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-&gt;ptr : NULL);
        JSB_PRECONDITION2( cobj, cx, JS_FALSE, &quot;Invalid Native Object&quot;);
        do {
                if (argc == 1) {
                        cocos2d::CCNode* arg0;
                        do {
                                if (!argv[0].isObject()) { ok = JS_FALSE; break; }
                                js_proxy_t *proxy;
                                JSObject *tmpObj = JSVAL_TO_OBJECT(argv[0]);
                                proxy = jsb_get_js_proxy(tmpObj);
                                arg0 = (cocos2d::CCNode*)(proxy ? proxy-&gt;ptr : NULL);
                                JSB_PRECONDITION2( arg0, cx, JS_FALSE, &quot;Invalid Native Object&quot;);
                        } while (0);
                        if (!ok) { ok = JS_TRUE; break; }
                        bool ret = cobj-&gt;init(arg0);
                        jsval jsret;
                        jsret = BOOLEAN_TO_JSVAL(ret);
                        JS_SET_RVAL(cx, vp, jsret);
                        return JS_TRUE;
                }
        } while(0);
    
        do {
                if (argc == 0) {
                        bool ret = cobj-&gt;init();
                        jsval jsret;
                        jsret = BOOLEAN_TO_JSVAL(ret);
                        JS_SET_RVAL(cx, vp, jsret);
                        return JS_TRUE;
                }
        } while(0);
    
        JS_ReportError(cx, &quot;wrong number of arguments&quot;);
        return JS_FALSE;
}
JSBool js_cocos2dx_ClippingNode_getStencil(JSContext *cx, uint32_t argc, jsval *vp)
{
        JSObject *obj = JS_THIS_OBJECT(cx, vp);
        js_proxy_t *proxy = jsb_get_js_proxy(obj);
        cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-&gt;ptr : NULL);
        JSB_PRECONDITION2( cobj, cx, JS_FALSE, &quot;Invalid Native Object&quot;);
        if (argc == 0) {
                cocos2d::CCNode* ret = cobj-&gt;getStencil();
                jsval jsret;
                do {
                        if (ret) {
                                js_proxy_t *proxy = js_get_or_create_proxy&lt;cocos2d::ccnode&gt;(cx, ret);
                                jsret = OBJECT_TO_JSVAL(proxy-&gt;obj);
                        } else {
                                jsret = JSVAL_NULL;
                        }
                } while (0);
                JS_SET_RVAL(cx, vp, jsret);
                return JS_TRUE;
        }
    
        JS_ReportError(cx, &quot;wrong number of arguments: %d, was expecting %d&quot;, argc, 0);
        return JS_FALSE;
}
JSBool js_cocos2dx_ClippingNode_setAlphaThreshold(JSContext *cx, uint32_t argc, jsval *vp)
{
        jsval *argv = JS_ARGV(cx, vp);
        JSBool ok = JS_TRUE;
        JSObject *obj = JS_THIS_OBJECT(cx, vp);
        js_proxy_t *proxy = jsb_get_js_proxy(obj);
        cocos2d::CCClippingNode* cobj = (cocos2d::CCClippingNode *)(proxy ? proxy-&gt;ptr : NULL);
        JSB_PRECONDITION2( cobj, cx, JS_FALSE, &quot;Invalid Native Object&quot;);
        if (argc == 1) {
                double arg0;
                ok &amp;= JS_ValueToNumber(cx, argv[0], &amp;arg0;);
                JSB_PRECONDITION2(ok, cx, JS_FALSE, &quot;Error processing arguments&quot;);
                cobj-&gt;setAlphaThreshold(arg0);
                JS_SET_RVAL(cx, vp, JSVAL_VOID);
                return JS_TRUE;
        }
    
        JS_ReportError(cx, &quot;wrong number of arguments: %d, was expecting %d&quot;, argc, 1);
        return JS_FALSE;
}
JSBool js_cocos2dx_ClippingNode_create(JSContext *cx, uint32_t argc, jsval *vp)
{
        jsval *argv = JS_ARGV(cx, vp);
        JSBool ok = JS_TRUE;
        
        do {
                if (argc == 1) {
                        cocos2d::CCNode* arg0;
                        do {
                                if (!argv[0].isObject()) { ok = JS_FALSE; break; }
                                js_proxy_t *proxy;
                                JSObject *tmpObj = JSVAL_TO_OBJECT(argv[0]);
                                proxy = jsb_get_js_proxy(tmpObj);
                                arg0 = (cocos2d::CCNode*)(proxy ? proxy-&gt;ptr : NULL);
                                JSB_PRECONDITION2( arg0, cx, JS_FALSE, &quot;Invalid Native Object&quot;);
                        } while (0);
                        if (!ok) { ok = JS_TRUE; break; }
                        cocos2d::CCClippingNode* ret = cocos2d::CCClippingNode::create(arg0);
                        jsval jsret;
                        do {
                                if (ret) {
                                        js_proxy_t *proxy = js_get_or_create_proxy&lt;cocos2d::ccclippingnode&gt;(cx, ret);
                                        jsret = OBJECT_TO_JSVAL(proxy-&gt;obj);
                                } else {
                                        jsret = JSVAL_NULL;
                                }
                        } while (0);
                        JS_SET_RVAL(cx, vp, jsret);
                        return JS_TRUE;
                }
        } while (0);
        
        do {
                if (argc == 0) {
                        cocos2d::CCClippingNode* ret = cocos2d::CCClippingNode::create();
                        jsval jsret;
                        do {
                                if (ret) {
                                        js_proxy_t *proxy = js_get_or_create_proxy&lt;cocos2d::ccclippingnode&gt;(cx, ret);
                                        jsret = OBJECT_TO_JSVAL(proxy-&gt;obj);
                                } else {
                                        jsret = JSVAL_NULL;
                                }
                        } while (0);
                        JS_SET_RVAL(cx, vp, jsret);
                        return JS_TRUE;
                }
        } while (0);
        JS_ReportError(cx, &quot;wrong number of arguments&quot;);
        return JS_FALSE;
}


extern JSObject *jsb_CCNode_prototype;

void js_cocos2dx_ClippingNode_finalize(JSFreeOp *fop, JSObject *obj) {
    CCLOGINFO(&quot;jsbindings: finalizing JS object %p (ClippingNode)&quot;, obj);
}

void js_register_cocos2dx_ClippingNode(JSContext *cx, JSObject *global) {
        jsb_ClippingNode_class = (JSClass *)calloc(1, sizeof(JSClass));
        jsb_ClippingNode_class-&gt;name = &quot;ClippingNode&quot;;
        jsb_ClippingNode_class-&gt;addProperty = JS_PropertyStub;
        jsb_ClippingNode_class-&gt;delProperty = JS_PropertyStub;
        jsb_ClippingNode_class-&gt;getProperty = JS_PropertyStub;
        jsb_ClippingNode_class-&gt;setProperty = JS_StrictPropertyStub;
        jsb_ClippingNode_class-&gt;enumerate = JS_EnumerateStub;
        jsb_ClippingNode_class-&gt;resolve = JS_ResolveStub;
        jsb_ClippingNode_class-&gt;convert = JS_ConvertStub;
        jsb_ClippingNode_class-&gt;finalize = js_cocos2dx_ClippingNode_finalize;
        jsb_ClippingNode_class-&gt;flags = JSCLASS_HAS_RESERVED_SLOTS(2);
    
        static JSPropertySpec properties[] = {
                {0, 0, 0, JSOP_NULLWRAPPER, JSOP_NULLWRAPPER}
        };
    
        static JSFunctionSpec funcs[] = {
                JS_FN(&quot;isInverted&quot;, js_cocos2dx_ClippingNode_isInverted, 0, JSPROP_PERMANENT | JSPROP_ENUMERATE),
                JS_FN(&quot;visit&quot;, js_cocos2dx_ClippingNode_visit, 0, JSPROP_PERMANENT | JSPROP_ENUMERATE),
                JS_FN(&quot;setInverted&quot;, js_cocos2dx_ClippingNode_setInverted, 1, JSPROP_PERMANENT | JSPROP_ENUMERATE),
                JS_FN(&quot;setStencil&quot;, js_cocos2dx_ClippingNode_setStencil, 1, JSPROP_PERMANENT | JSPROP_ENUMERATE),
                JS_FN(&quot;getAlphaThreshold&quot;, js_cocos2dx_ClippingNode_getAlphaThreshold, 0, JSPROP_PERMANENT | JSPROP_ENUMERATE),
                JS_FN(&quot;init&quot;, js_cocos2dx_ClippingNode_init, 0, JSPROP_PERMANENT | JSPROP_ENUMERATE),
                JS_FN(&quot;getStencil&quot;, js_cocos2dx_ClippingNode_getStencil, 0, JSPROP_PERMANENT | JSPROP_ENUMERATE),
                JS_FN(&quot;setAlphaThreshold&quot;, js_cocos2dx_ClippingNode_setAlphaThreshold, 1, JSPROP_PERMANENT | JSPROP_ENUMERATE),
        JS_FS_END
        };
    
        static JSFunctionSpec st_funcs[] = {
                JS_FN(&quot;create&quot;, js_cocos2dx_ClippingNode_create, 0, JSPROP_PERMANENT | JSPROP_ENUMERATE),
                JS_FS_END
        };
    
        jsb_ClippingNode_prototype = JS_InitClass(
                                              cx, global,
                                              jsb_CCNode_prototype,
                                              jsb_ClippingNode_class,
                                              empty_constructor, 0,
                                              properties,
                                              funcs,
                                              NULL, // no static properties
                                              st_funcs);
        // make the class enumerable in the registered namespace
        JSBool found;
        JS_SetPropertyAttributes(cx, global, &quot;ClippingNode&quot;, JSPROP_ENUMERATE | JSPROP_READONLY, &amp;found;);
    
        // add the proto and JSClass to the type-&gt;js info hash table
        TypeTest&lt;cocos2d::ccclippingnode&gt; t;
        js_type_class_t *p;
        uint32_t typeId = t.s_id();
        HASH_FIND_INT(_js_global_type_ht, &amp;typeId;, p);
        if (!p) {
                p = (js_type_class_t *)malloc(sizeof(js_type_class_t));
                p-&gt;type = typeId;
                p-&gt;jsclass = jsb_ClippingNode_class;
                p-&gt;proto = jsb_ClippingNode_prototype;
                p-&gt;parentProto = jsb_CCNode_prototype;
                HASH_ADD_INT(_js_global_type_ht, type, p);
        }
}
</code></pre>
<p>cocos2d-x 3.0 已经帮定，本代码在 cocos2d-x 2.1.5 下测试通过</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://example.org/tags/clippingnode/">
ClippingNode
      </a></li>
      <li><a href="http://example.org/tags/cocos2d-x/">
cocos2d-x
      </a></li>
      <li><a href="http://example.org/tags/jsb/">
jsb
      </a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="http://example.org/">白天’s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
